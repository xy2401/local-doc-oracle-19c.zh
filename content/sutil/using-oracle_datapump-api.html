<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Describes the Data Pump API, DBMS_DATAPUMP.">
      <meta name="description" content="Describes the Data Pump API, DBMS_DATAPUMP.">
      <title>数据泵API</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Utilities ">
      <meta property="og:description" content="Describes the Data Pump API, DBMS_DATAPUMP.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Utilities">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-utilities.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-04-23T19:07:17-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2002, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96081-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="oracle-data-pump-performance-tips.html" title="Previous" type="text/html">
      <link rel="next" href="oracle-sql-loader.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Utilities">
    <meta name="dcterms.isVersionOf" content="SUTIL">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="oracle-data-pump-performance-tips.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="oracle-sql-loader.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">公用事业</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-data-pump.html" property="item" typeof="WebPage"><span property="name">Oracle Data Pump</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">数据泵API</li>
            </ol>
            <a id="GUID-EAD7AE4B-778A-4369-9842-68E026409045" name="GUID-EAD7AE4B-778A-4369-9842-68E026409045"></a><a id="SUTIL600"></a>
            
            <h2 id="SUTIL-GUID-EAD7AE4B-778A-4369-9842-68E026409045" class="sect2"><span class="enumeration_chapter">6</span>数据泵API</h2>
         </header>
         <div class="ind"><script type="text/javascript">window.name='using-oracle_datapump-api'</script><script type="text/javascript">
    function footdisplay(footnum,footnote) {
    var msg = window.open('about:blank', 'NewWindow' + footnum,
        'directories=no,height=100,location=no,menubar=no,resizable=yes,' +
        'scrollbars=yes,status=no,toolbar=no,width=598');
    msg.document.open('text/html');
    msg.document.write('<!DOCTYPE html ');
    msg.document.write('PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" ');
    msg.document.write('"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'); 
    msg.document.write('<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" dir="ltr"><head><title>');
   
    msg.document.write('Footnote&nbsp; ' + footnum);
    msg.document.write('<\/title><meta http-equiv="Content-Type" ');
    msg.document.write('content="text/html; charset=utf-8" />');
    msg.document.write('<meta http-equiv="Content-Script-Type" ');
    msg.document.write('content="text/javascript" />');
    msg.document.write('<style type="text/css"> <![CDATA[ ');
    msg.document.write('h1 {text-align: center; font-size: 14pt;}');
    msg.document.write('fieldset {border: none;}');
    msg.document.write('form {text-align: center;}');
    msg.document.write(' ]]\u003e <\/style>');
    msg.document.write('<\/head><body><div id="footnote"><h1>Footnote&nbsp; ' + footnum + '<\/h1><p>');
    msg.document.write(footnote);
    msg.document.write('<\/p><form action="" method="post"><fieldset>');
    msg.document.write('<input type="button" value="OK" ');
    msg.document.write('onclick="window.close();" />');
    msg.document.write('<\/fieldset><\/form><\/div><\/body><\/html>');
    msg.document.close();
    setTimeout(function() {
        var height = msg.document.getElementById('footnote').offsetHeight;
        msg.resizeTo(598, height + 100);
    }
    , 100);
    msg.focus();
}
            </script><noscript>
               <p>此页面上的脚本内容仅用于导航目的，不会以任何方式更改内容。</p>
            </noscript>
            <div>
               <p>描述Data Pump API， <code class="codeph">DBMS_DATAPUMP</code> 。</p>
               <p>Data Pump API <code class="codeph">DBMS_DATAPUMP</code>提供了一种高速机制，可将站点的全部或部分数据和元数据从一个数据库移动到另一个数据库。Data Pump Export和Data Pump Import实用程序基于Data Pump API。</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="using-oracle_datapump-api.html#GUID-176E03D9-83CF-449F-95D9-C580F1770C88">如何与Data Pump API的客户端接口工作？</a><br>客户端接口中使用的主要结构是作业句柄，它对调用者显示为整数。
                  </li>
                  <li class="ulchildlink"><a href="using-oracle_datapump-api.html#GUID-22D4851C-4057-4BBB-B7F0-DB9091A30641">使用Data Pump API的基本步骤是什么？</a><br>要使用Data Pump API，请使用<code class="codeph">DBMS_DATAPUMP</code>包中提供的过程。
                  </li>
                  <li class="ulchildlink"><a href="using-oracle_datapump-api.html#GUID-5AAC848B-5A2B-4FD1-97ED-D3A048263118">使用Data Pump API的示例</a><br>使用Data Pump API。</li>
               </ul>
               <div class="infoboxnotealso" id="GUID-EAD7AE4B-778A-4369-9842-68E026409045__GUID-4E38CC6F-5D18-41B0-9FB2-E0FFF107FE00">
                  <p class="notep1">也可以看看：</p>
                  <p></p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="../arpls/DBMS_DATAPUMP.html#ARPLS356" target="_blank"><span><cite>Oracle Database PL / SQL包和类型参考</cite></span></a> ，以获取<code class="codeph">DBMS_DATAPUMP</code>包中可用过程的详细说明</p>
                     </li>
                     <li>
                        <p>有关Data Pump概念的其他说明，请参见<a href="oracle-data-pump-overview.html#GUID-17FAE261-0972-4220-A2E4-44D479F519D4" title="Oracle Data Pump技术可以将数据和元数据从一个数据库高速移动到另一个数据库。">Oracle Data Pump概述</a></p>
                     </li>
                  </ul>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="oracle-data-pump.html#GUID-501A9908-BCC5-434C-8853-9A6096766B5A">Oracle Data Pump</a></p>
                  </div>
               </div>
            </div>
            <a id="SUTIL974"></a><div class="props_rev_3"><a id="GUID-176E03D9-83CF-449F-95D9-C580F1770C88" name="GUID-176E03D9-83CF-449F-95D9-C580F1770C88"></a><h3 id="SUTIL-GUID-176E03D9-83CF-449F-95D9-C580F1770C88" class="sect3"><span class="enumeration_section">6.1</span>数据泵API的客户端接口如何工作？
               </h3>
               <div>
                  <p>客户端接口中使用的主要结构是作业句柄，它对调用者显示为整数。</p>
                  <p>句柄是使用<code class="codeph">DBMS_DATAPUMP</code>创建的。 <code class="codeph">OPEN</code>或<code class="codeph">DBMS_DATAPUMP</code> 。 <code class="codeph">ATTACH</code>功能。其他会话可以附加到作业以监视和控制其进度。这允许DBA在离开工作之前启动工作，然后在家中观察工作的进度。句柄是特定于会话的。相同的作业可以在不同的会话中创建不同的句柄。
                  </p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-oracle_datapump-api.html#GUID-1622BCF2-2D0C-4FD5-9C52-E756CC81BA76">工作国</a><br>描述工作状态。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-oracle_datapump-api.html#GUID-EAD7AE4B-778A-4369-9842-68E026409045" title="描述Data Pump API，DBMS_DATAPUMP。">Data Pump API</a></p>
                     </div>
                  </div>
               </div>
               <a id="SUTIL3307"></a><a id="SUTIL975"></a><div class="props_rev_3"><a id="GUID-1622BCF2-2D0C-4FD5-9C52-E756CC81BA76" name="GUID-1622BCF2-2D0C-4FD5-9C52-E756CC81BA76"></a><h4 id="SUTIL-GUID-1622BCF2-2D0C-4FD5-9C52-E756CC81BA76" class="sect4"><span class="enumeration_section">6.1.1</span>工作状态</h4>
                  <div>
                     <p>描述工作状态。</p>
                     <div class="section">
                        <p>有一个与工作的每个阶段相关的状态，如下所示：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>未定义 - 在创建句柄之前</p>
                           </li>
                           <li>
                              <p>定义 - 首次创建句柄时</p>
                           </li>
                           <li>
                              <p>执行 - 当<code class="codeph">DBMS_DATAPUMP</code> 。执行<code class="codeph">START_JOB</code>过程</p>
                           </li>
                           <li>
                              <p>完成 - 当作业完成工作并且数据泵流程结束时</p>
                           </li>
                           <li>
                              <p>完成 - 工作完成时</p>
                           </li>
                           <li>
                              <p>停止等待 - 当请求有序的作业关闭时</p>
                           </li>
                           <li>
                              <p>停止 - 当工作停止时</p>
                           </li>
                           <li>
                              <p>空闲 - 执行<code class="codeph">DBMS_DATAPUMP.ATTACH</code>以附加到已停止作业的时间与执行<code class="codeph">DBMS_DATAPUMP.START_JOB</code>以重新启动该作业的时间之间的时间段</p>
                           </li>
                           <li>
                              <p>未运行 - 当存在未运行的作业的主表时（没有与之关联的数据泵进程）</p>
                           </li>
                        </ul>
                        <p>执行<code class="codeph">DBMS_DATAPUMP</code> 。处于空闲状态的作业的<code class="codeph">START_JOB</code>将使其返回执行状态。
                        </p>
                        <p>如果所有用户都执行<code class="codeph">DBMS_DATAPUMP</code> 。 <code class="codeph">DETACH</code>从定义状态的作业中分离，然后该作业将完全从数据库中删除。
                        </p>
                        <p>当作业异常终止或运行作业的实例关闭时，如果作业先前正在执行或空闲，则作业将处于“未运行”状态。然后，用户可以重新启动它。</p>
                        <p>主控制过程在定义，空转，执行，停止，停止等待和完成状态中处于活动状态。它在Stopped和Completed状态下也会短暂激活。作业的主表存在于除未定义状态之外的所有状态。工作进程仅在执行和停止挂起状态中处于活动状态，并且仅在导入作业的定义状态中处于活动状态。</p>
                        <p>作业处于执行状态时分离不会暂停作业，您可以随时重新连接到正在执行的作业以恢复获取有关作业的状态信息。</p>
                        <p>执行<code class="codeph">DBMS_DATAPUMP.DETACH</code>过程时，可以显式发生分离，或者当数据泵API会话运行时，Data Pump API无法与数据泵作业或<code class="codeph">DBMS_DATAPUMP.STOP_JOB</code>通信时，可以隐式发生<code class="codeph">DBMS_DATAPUMP.STOP_JOB</code>执行<code class="codeph">DBMS_DATAPUMP.STOP_JOB</code>过程。
                        </p>
                        <p>“未运行”状态表示主表存在于正在执行的作业的上下文之外。如果作业已停止（可能稍后重新启动）或作业异常终止，则会发生这种情况。在作业开始时的作业状态转换期间以及在删除主表之前的作业结束时，也可以暂时看到此状态。需要注意的是，非运行状态显示仅在<code class="codeph">DBA_DATAPUMP_JOBS</code>视图和<code class="codeph">USER_DATAPUMP_JOBS</code>视图。它永远不会被<code class="codeph">GET_STATUS</code>程序返回。
                        </p>
                        <p><a href="using-oracle_datapump-api.html#GUID-1622BCF2-2D0C-4FD5-9C52-E756CC81BA76__I1005638" title="可以执行DBMS_DATAPUMP过程的有效状态">表6-1</a>显示了可以执行<code class="codeph">DBMS_DATAPUMP</code>过程的有效作业状态。除非另有说明，否则列出的州对出口和进口工作均有效。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-1622BCF2-2D0C-4FD5-9C52-E756CC81BA76__I1005638">
                        <p class="titleintable">表6-1可以执行DBMS_DATAPUMP过程的有效作业状态</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="可以执行DBMS_DATAPUMP过程的有效作业状态" width="100%" border="1" summary="Valid states in which DBMS_DATAPUMP procedures can be executed" frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d46263e320">程序名称</th>
                                 <th align="left" valign="bottom" id="d46263e323">有效国家</th>
                                 <th align="left" valign="bottom" id="d46263e326">描述</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e331" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">ADD_FILE</pre></td>
                                 <td align="left" valign="top" headers="d46263e331 d46263e323 ">
                                    <p>定义（对导出和导入作业都有效）</p>
                                    <p>执行和空闲（仅对指定导出作业的转储文件有效）</p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e331 d46263e326 ">
                                    <p>指定转储文件集，日志文件或SQLFILE输出的文件。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e343" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">ATTACH</pre></td>
                                 <td align="left" valign="top" headers="d46263e343 d46263e323 ">
                                    <p>定义，执行，空转，停止，完成，完成，未运行</p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e343 d46263e326 ">
                                    <p>允许用户会话监视作业或重新启动已停止的作业。如果已以任何方式删除或更改作业的转储文件集或主表，则附加将失败。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e353" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">DATA_FILTER</pre></td>
                                 <td align="left" valign="top" headers="d46263e353 d46263e323 ">
                                    <p>定义</p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e353 d46263e326 ">
                                    <p>限制作业处理的数据。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e363" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">DETACH</pre></td>
                                 <td align="left" valign="top" headers="d46263e363 d46263e323 ">
                                    <p>所有</p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e363 d46263e326 ">
                                    <p>断开用户会话与作业的连接。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e373" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">GET_DUMPFILE_INFO</pre></td>
                                 <td align="left" valign="top" headers="d46263e373 d46263e323 ">
                                    <p>所有</p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e373 d46263e326 ">
                                    <p>检索转储文件头信息。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e383" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">GET_STATUS</pre></td>
                                 <td align="left" valign="top" headers="d46263e383 d46263e323 ">
                                    <p>全部，除了已完成，未运行，已停止和未定义</p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e383 d46263e326 ">
                                    <p>获得工作的状态。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e393" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">LOG_ENTRY</pre></td>
                                 <td align="left" valign="top" headers="d46263e393 d46263e323 ">
                                    <p>定义，执行，空转，停止等待，完成</p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e393 d46263e326 ">
                                    <p>在日志文件中添加一个条目。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e403" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">METADATA_FILTER</pre></td>
                                 <td align="left" valign="top" headers="d46263e403 d46263e323 ">
                                    <p>定义</p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e403 d46263e326 ">
                                    <p>限制作业处理的元数据。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e413" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">METADATA_REMAP</pre></td>
                                 <td align="left" valign="top" headers="d46263e413 d46263e323 ">
                                    <p>定义</p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e413 d46263e326 ">
                                    <p>重新映射作业处理的元数据。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e423" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">METADATA_TRANSFORM</pre></td>
                                 <td align="left" valign="top" headers="d46263e423 d46263e323 ">
                                    <p>定义</p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e423 d46263e326 ">
                                    <p>更改作业处理的元数据。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e433" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">OPEN</pre></td>
                                 <td align="left" valign="top" headers="d46263e433 d46263e323 ">
                                    <p>未定义</p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e433 d46263e326 ">
                                    <p>创造一份新工作。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e444" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">SET_PARALLEL</pre></td>
                                 <td align="left" valign="top" headers="d46263e444 d46263e323 ">
                                    <p>定义，执行，空转</p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e444 d46263e326 ">
                                    <p>指定作业的并行度。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e454" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">SET_PARAMETER</pre></td>
                                 <td align="left" valign="top" headers="d46263e454 d46263e323 ">
                                    <p>定义<a id="fn_1" name="fn_1" href="#fn_1" the="" encryption_password="" parameter="" can="" be="" entered="" during="" idling="" state,="" as="" well="" defining="" state=")" ="" onclick="footdisplay(1, "><sup>脚1</sup></a></p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e454 d46263e326 ">
                                    <p>更改作业的默认处理。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e470" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">START_JOB</pre></td>
                                 <td align="left" valign="top" headers="d46263e470 d46263e323 ">
                                    <p>定义，空转</p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e470 d46263e326 ">
                                    <p>开始或恢复执行作业。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e480" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">STOP_JOB</pre></td>
                                 <td align="left" valign="top" headers="d46263e480 d46263e323 ">
                                    <p>定义，执行，空转，停止等待</p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e480 d46263e326 ">
                                    <p>启动关闭作业。</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d46263e490" headers="d46263e320 "><pre class="oac_no_warn" dir="ltr">WAIT_FOR_JOB</pre><p></p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e490 d46263e323 ">
                                    <p>全部，除了已完成，未运行，已停止和未定义</p>
                                 </td>
                                 <td align="left" valign="top" headers="d46263e490 d46263e326 ">
                                    <p>等待工作结束。</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p class="tablefootnote"><sup class="tablefootnote">脚注1</sup></p><p>可以在空闲状态期间以及定义状态期间输入<code class="codeph">ENCRYPTION_PASSWORD</code>参数。
                        </p>
                     <p></p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="using-oracle_datapump-api.html#GUID-176E03D9-83CF-449F-95D9-C580F1770C88" title="客户端接口中使用的主要结构是作业句柄，它对调用者显示为整数。">Data Pump API的客户端接口如何工作？</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div><a id="SUTIL976"></a><div class="props_rev_3"><a id="GUID-22D4851C-4057-4BBB-B7F0-DB9091A30641" name="GUID-22D4851C-4057-4BBB-B7F0-DB9091A30641"></a><h3 id="SUTIL-GUID-22D4851C-4057-4BBB-B7F0-DB9091A30641" class="sect3"><span class="enumeration_section">6.2</span>使用Data Pump API的基本步骤是什么？
               </h3>
               <div>
                  <p>要使用Data Pump API，请使用<code class="codeph">DBMS_DATAPUMP</code>包中提供的过程。
                  </p>
                  <div class="section">
                     <p>以下步骤列出了使用Data Pump API所涉及的基本活动。这些步骤按通常执行活动的顺序列出：</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>执行<code class="codeph">DBMS_DATAPUMP</code> 。用于创建数据泵作业及其基础结构的<code class="codeph">OPEN</code>过程。</span></li>
                     <li><span>定义作业的任何参数。</span></li>
                     <li><span>开始工作。</span></li>
                     <li><span>（可选）监视作业，直到完成为止。</span></li>
                     <li><span>（可选）从作业中分离并在以后重新附加。</span></li>
                     <li><span>（可选）停止作业。</span></li>
                     <li><span>（可选）如果需要，请重新启动作业。</span></li>
                  </ol>
                  <div class="section">
                     <p>这些概念在下一节提供的示例中说明。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-22D4851C-4057-4BBB-B7F0-DB9091A30641__GUID-7BFB0FEA-3630-4E99-9707-5D9486D3319A">
                     <p class="notep1">也可以看看：</p>
                     <p>有关<code class="codeph">DBMS_DATAPUMP</code>程序包的完整说明，请<code class="codeph">DBMS_DATAPUMP</code> <a href="../arpls/DBMS_DATAPUMP.html#ARPLS356" target="_blank"><span class="italic">Oracle Database PL / SQL程序包和类型参考</span></a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-oracle_datapump-api.html#GUID-EAD7AE4B-778A-4369-9842-68E026409045" title="描述Data Pump API，DBMS_DATAPUMP。">Data Pump API</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="SUTIL3308"></a><a id="SUTIL3309"></a><a id="SUTIL3310"></a><a id="SUTIL3943"></a><a id="SUTIL977"></a><div class="props_rev_3"><a id="GUID-5AAC848B-5A2B-4FD1-97ED-D3A048263118" name="GUID-5AAC848B-5A2B-4FD1-97ED-D3A048263118"></a><h3 id="SUTIL-GUID-5AAC848B-5A2B-4FD1-97ED-D3A048263118" class="sect3"><span class="enumeration_section">6.3</span>使用Data Pump API的示例</h3>
               <div>
                  <p>使用Data Pump API。</p>
                  <p>本节提供以下示例以帮助您开始使用Data Pump API：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>执行简单模式导出（ <a href="using-oracle_datapump-api.html#GUID-5AAC848B-5A2B-4FD1-97ED-D3A048263118__I1006610">例6-1</a> ）</p>
                     </li>
                     <li>
                        <p>导入转储文件并重新映射所有架构对象（ <a href="using-oracle_datapump-api.html#GUID-5AAC848B-5A2B-4FD1-97ED-D3A048263118__I1006835">示例6-2</a> ）</p>
                     </li>
                     <li>
                        <p>在简单模式导出期间使用异常处理（ <a href="using-oracle_datapump-api.html#GUID-5AAC848B-5A2B-4FD1-97ED-D3A048263118__I1008408">示例6-3</a> ）</p>
                     </li>
                     <li>
                        <p>显示转储文件信息（ <a href="using-oracle_datapump-api.html#GUID-5AAC848B-5A2B-4FD1-97ED-D3A048263118__BABBEHEF">例6-4</a> ）</p>
                     </li>
                  </ul>
                  <p>示例采用PL / SQL脚本的形式。如果您选择复制这些脚本并运行它们，则必须首先使用SQL * Plus执行以下操作：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>创建一个目录对象并授予其<code class="codeph">READ</code>和<code class="codeph">WRITE</code>访问权限。例如，要创建您有权访问的名为<code class="codeph">dmpdir</code>的目录对象，请执行以下操作。用您的用户名替换<span class="italic"><code class="codeph">user</code></span> 。
                        </p><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE DIRECTORY dmpdir AS '/rdbms/work';
SQL&gt; GRANT READ, WRITE ON DIRECTORY dmpdir TO <span class="italic">user</span>;
</pre></li>
                     <li>
                        <p>确保您具有<code class="codeph">EXP_FULL_DATABASE</code>和<code class="codeph">IMP_FULL_DATABASE</code>角色。要查看安全域中分配给您的所有角色的列表，请执行以下操作：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT * FROM SESSION_ROLES;
</pre><p>如果您没有分配必要的角色，请与系统管理员联系以获取帮助。</p>
                     </li>
                     <li>
                        <p>如果服务器输出尚未打开，请将其打开。这样做如下：</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SET SERVEROUTPUT ON
</pre><p>如果您不这样做，那么您将不会看到任何输出到您的屏幕。您必须在运行该示例的同一会话中执行此操作。如果退出SQL * Plus，则此设置将丢失，并且必须在开始新会话时重置。（如果连接到其他用户名，也必须重置。）</p>
                     </li>
                  </ul>
                  <div class="example" id="GUID-5AAC848B-5A2B-4FD1-97ED-D3A048263118__I1006610">
                     <p class="titleinexample">示例6-1执行简单模式导出</p>
                     <p>此示例中的PL / SQL脚本显示了如何使用Data Pump API执行<code class="codeph">HR</code>模式的简单模式导出。它显示了如何创建作业，启动它并监视它。有关该示例的其他信息包含在脚本中的注释中。为了简化示例，不会捕获任何API调用的异常。但是，在生产环境中，Oracle建议您定义异常处理程序并调用<code class="codeph">GET_STATUS</code>以在发生故障时检索更详细的错误信息。
                     </p>
                     <p>以用户<code class="codeph">SYSTEM</code>身份连接以使用此脚本。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  ind NUMBER;              -- Loop index
  h1 NUMBER;               -- Data Pump job handle
  percent_done NUMBER;     -- Percentage of job complete
  job_state VARCHAR2(30);  -- To keep track of job state
  le ku$_LogEntry;         -- For WIP and error messages
  js ku$_JobStatus;        -- The job status from get_status
  jd ku$_JobDesc;          -- The job description from get_status
  sts ku$_Status;          -- The status object returned by get_status
BEGIN

-- Create a (user-named) Data Pump job to do a schema export.

  h1 := DBMS_DATAPUMP.OPEN('EXPORT','SCHEMA',NULL,'EXAMPLE1','LATEST');

-- Specify a single dump file for the job (using the handle just returned)
-- and a directory object, which must already be defined and accessible
-- to the user running this procedure.

  DBMS_DATAPUMP.ADD_FILE(h1,'example1.dmp','DMPDIR');

-- A metadata filter is used to specify the schema that will be exported.

  DBMS_DATAPUMP.METADATA_FILTER(h1,'SCHEMA_EXPR','IN (''HR'')');

-- Start the job. An exception will be generated if something is not set up
-- properly. 

  DBMS_DATAPUMP.START_JOB(h1);

-- The export job should now be running. In the following loop, the job
-- is monitored until it completes. In the meantime, progress information is
-- displayed.
 
  percent_done := 0;
  job_state := 'UNDEFINED';
  while (job_state != 'COMPLETED') and (job_state != 'STOPPED') loop
    dbms_datapump.get_status(h1,
           dbms_datapump.ku$_status_job_error +
           dbms_datapump.ku$_status_job_status +
           dbms_datapump.ku$_status_wip,-1,job_state,sts);
    js := sts.job_status;

-- If the percentage done changed, display the new value.

    if js.percent_done != percent_done
    then
      dbms_output.put_line('*** Job percent done = ' ||
                           to_char(js.percent_done));
      percent_done := js.percent_done;
    end if;

-- If any work-in-progress (WIP) or error messages were received for the job,
-- display them.

   if (bitand(sts.mask,dbms_datapump.ku$_status_wip) != 0)
    then
      le := sts.wip;
    else
      if (bitand(sts.mask,dbms_datapump.ku$_status_job_error) != 0)
      then
        le := sts.error;
      else
        le := null;
      end if;
    end if;
    if le is not null
    then
      ind := le.FIRST;
      while ind is not null loop
        dbms_output.put_line(le(ind).LogText);
        ind := le.NEXT(ind);
      end loop;
    end if;
  end loop;

-- Indicate that the job finished and detach from it.

  dbms_output.put_line('Job has completed');
  dbms_output.put_line('Final job state = ' || job_state);
  dbms_datapump.detach(h1);
END;
/</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-5AAC848B-5A2B-4FD1-97ED-D3A048263118__I1006835">
                     <p class="titleinexample">示例6-2导入转储文件并重新映射所有架构对象</p>
                     <p>此示例中的脚本导入在<a href="using-oracle_datapump-api.html#GUID-5AAC848B-5A2B-4FD1-97ED-D3A048263118__I1006610">示例6-1中</a>创建的转储文件（ <code class="codeph">hr</code>模式的导出）。所有模式对象都从<code class="codeph">hr</code>模式重新映射到<code class="codeph">blake</code>模式。为了简化示例，不会捕获任何API调用的异常。但是，在生产环境中，Oracle建议您定义异常处理程序并调用<code class="codeph">GET_STATUS</code>以在发生故障时检索更详细的错误信息。
                     </p>
                     <p>以用户<code class="codeph">SYSTEM</code>身份连接以使用此脚本。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  ind NUMBER;              -- Loop index
  h1 NUMBER;               -- Data Pump job handle
  percent_done NUMBER;     -- Percentage of job complete
  job_state VARCHAR2(30);  -- To keep track of job state
  le ku$_LogEntry;         -- For WIP and error messages
  js ku$_JobStatus;        -- The job status from get_status
  jd ku$_JobDesc;          -- The job description from get_status
  sts ku$_Status;          -- The status object returned by get_status
BEGIN

-- Create a (user-named) Data Pump job to do a "full" import (everything
-- in the dump file without filtering).

  h1 := DBMS_DATAPUMP.OPEN('IMPORT','FULL',NULL,'EXAMPLE2');

-- Specify the single dump file for the job (using the handle just returned)
-- and directory object, which must already be defined and accessible
-- to the user running this procedure. This is the dump file created by
-- the export operation in the first example.

  DBMS_DATAPUMP.ADD_FILE(h1,'example1.dmp','DMPDIR');

-- A metadata remap will map all schema objects from HR to BLAKE.

  DBMS_DATAPUMP.METADATA_REMAP(h1,'REMAP_SCHEMA','HR','BLAKE');

-- If a table already exists in the destination schema, skip it (leave
-- the preexisting table alone). This is the default, but it does not hurt
-- to specify it explicitly.

  DBMS_DATAPUMP.SET_PARAMETER(h1,'TABLE_EXISTS_ACTION','SKIP');

-- Start the job. An exception is returned if something is not set up properly.

  DBMS_DATAPUMP.START_JOB(h1);

-- The import job should now be running. In the following loop, the job is 
-- monitored until it completes. In the meantime, progress information is 
-- displayed. Note: this is identical to the export example.
 
 percent_done := 0;
  job_state := 'UNDEFINED';
  while (job_state != 'COMPLETED') and (job_state != 'STOPPED') loop
    dbms_datapump.get_status(h1,
           dbms_datapump.ku$_status_job_error +
           dbms_datapump.ku$_status_job_status +
           dbms_datapump.ku$_status_wip,-1,job_state,sts);
    js := sts.job_status;

-- If the percentage done changed, display the new value.

     if js.percent_done != percent_done
    then
      dbms_output.put_line('*** Job percent done = ' ||
                           to_char(js.percent_done));
      percent_done := js.percent_done;
    end if;

-- If any work-in-progress (WIP) or Error messages were received for the job,
-- display them.

       if (bitand(sts.mask,dbms_datapump.ku$_status_wip) != 0)
    then
      le := sts.wip;
    else
      if (bitand(sts.mask,dbms_datapump.ku$_status_job_error) != 0)
      then
        le := sts.error;
      else
        le := null;
      end if;
    end if;
    if le is not null
    then
      ind := le.FIRST;
      while ind is not null loop
        dbms_output.put_line(le(ind).LogText);
        ind := le.NEXT(ind);
      end loop;
    end if;
  end loop;

-- Indicate that the job finished and gracefully detach from it. 

  dbms_output.put_line('Job has completed');
  dbms_output.put_line('Final job state = ' || job_state);
  dbms_datapump.detach(h1);
END;
/</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-5AAC848B-5A2B-4FD1-97ED-D3A048263118__I1008408">
                     <p class="titleinexample">示例6-3在简单模式导出期间使用异常处理</p>
                     <p>此示例中的脚本使用Data Pump API显示简单的模式导出。它扩展了<a href="using-oracle_datapump-api.html#GUID-5AAC848B-5A2B-4FD1-97ED-D3A048263118__I1006610">示例6-1，</a>以展示如何使用异常处理来捕获<code class="codeph">SUCCESS_WITH_INFO</code>情况，以及如何使用<code class="codeph">GET_STATUS</code>过程来检索有关错误的其他信息。要获取有关<code class="codeph">DBMS_DATAPUMP.OPEN</code>或<code class="codeph">DBMS_DATAPUMP.ATTACH</code>失败的异常信息，请使用<code class="codeph">DBMS_DATAPUMP.KU$_STATUS_JOB_ERROR</code>信息掩码和NULL作业句柄调用<code class="codeph">DBMS_DATAPUMP.GET_STATUS</code>以检索错误详细信息。
                     </p>
                     <p>以用户<code class="codeph">SYSTEM</code>身份连接以使用此示例。
                     </p><pre class="oac_no_warn" dir="ltr">DECLARE
  ind NUMBER;              -- Loop index
  spos NUMBER;             -- String starting position
  slen NUMBER;             -- String length for output
  h1 NUMBER;               -- Data Pump job handle
  percent_done NUMBER;     -- Percentage of job complete
  job_state VARCHAR2(30);  -- To keep track of job state
  le ku$_LogEntry;         -- For WIP and error messages
  js ku$_JobStatus;        -- The job status from get_status
  jd ku$_JobDesc;          -- The job description from get_status
  sts ku$_Status;          -- The status object returned by get_status
BEGIN

-- Create a (user-named) Data Pump job to do a schema export.

  h1 := dbms_datapump.open('EXPORT','SCHEMA',NULL,'EXAMPLE3','LATEST');

-- Specify a single dump file for the job (using the handle just returned)
-- and a directory object, which must already be defined and accessible
-- to the user running this procedure.

  dbms_datapump.add_file(h1,'example3.dmp','DMPDIR');

-- A metadata filter is used to specify the schema that will be exported.

  dbms_datapump.metadata_filter(h1,'SCHEMA_EXPR','IN (''HR'')');

-- Start the job. An exception will be returned if something is not set up
-- properly.One possible exception that will be handled differently is the
-- success_with_info exception. success_with_info means the job started
-- successfully, but more information is available through get_status about
-- conditions around the start_job that the user might want to be aware of.

    begin
    dbms_datapump.start_job(h1);
    dbms_output.put_line('Data Pump job started successfully');
    exception
      when others then
        if sqlcode = dbms_datapump.success_with_info_num
        then
          dbms_output.put_line('Data Pump job started with info available:');
          dbms_datapump.get_status(h1,
                                   dbms_datapump.ku$_status_job_error,0,
                                   job_state,sts);
          if (bitand(sts.mask,dbms_datapump.ku$_status_job_error) != 0)
          then
            le := sts.error;
            if le is not null
            then
              ind := le.FIRST;
              while ind is not null loop
                dbms_output.put_line(le(ind).LogText);
                ind := le.NEXT(ind);
              end loop;
            end if;
          end if;
        else
          raise;
        end if;
  end;

-- The export job should now be running. In the following loop, 
-- the job is monitored until it completes. In the meantime, progress information -- is displayed.
 
 percent_done := 0;
  job_state := 'UNDEFINED';
  while (job_state != 'COMPLETED') and (job_state != 'STOPPED') loop
    dbms_datapump.get_status(h1,
           dbms_datapump.ku$_status_job_error +
           dbms_datapump.ku$_status_job_status +
           dbms_datapump.ku$_status_wip,-1,job_state,sts);
    js := sts.job_status;

-- If the percentage done changed, display the new value.

     if js.percent_done != percent_done
    then
      dbms_output.put_line('*** Job percent done = ' ||
                           to_char(js.percent_done));
      percent_done := js.percent_done;
    end if;

-- Display any work-in-progress (WIP) or error messages that were received for
-- the job.

      if (bitand(sts.mask,dbms_datapump.ku$_status_wip) != 0)
    then
      le := sts.wip;
    else
      if (bitand(sts.mask,dbms_datapump.ku$_status_job_error) != 0)
      then
        le := sts.error;
      else
        le := null;
      end if;
    end if;
    if le is not null
    then
      ind := le.FIRST;
      while ind is not null loop
        dbms_output.put_line(le(ind).LogText);
        ind := le.NEXT(ind);
      end loop;
    end if;
  end loop;

-- Indicate that the job finished and detach from it.

  dbms_output.put_line('Job has completed');
  dbms_output.put_line('Final job state = ' || job_state);
  dbms_datapump.detach(h1);

-- Any exceptions that propagated to this point will be captured. The
-- details will be retrieved from get_status and displayed.

  exception
    when others then
      dbms_output.put_line('Exception in Data Pump job');
      dbms_datapump.get_status(h1,dbms_datapump.ku$_status_job_error,0,
                               job_state,sts);
      if (bitand(sts.mask,dbms_datapump.ku$_status_job_error) != 0)
      then
        le := sts.error;
        if le is not null
        then
          ind := le.FIRST;
          while ind is not null loop
            spos := 1;
            slen := length(le(ind).LogText);
            if slen &gt; 255
            then
              slen := 255;
            end if;
            while slen &gt; 0 loop
              dbms_output.put_line(substr(le(ind).LogText,spos,slen));
              spos := spos + 255;
              slen := length(le(ind).LogText) + 1 - spos;
            end loop;
            ind := le.NEXT(ind);
          end loop;
        end if;
      end if;
END;
/</pre></div>
                  <!-- class="example" -->
                  <div class="example" id="GUID-5AAC848B-5A2B-4FD1-97ED-D3A048263118__BABBEHEF">
                     <p class="titleinexample">示例6-4显示转储文件信息</p>
                     <p>此示例中的PL / SQL脚本显示如何使用Data Pump API过程<code class="codeph">DBMS_DATAPUMP.GET_DUMPFILE_INFO</code>显示有关任何Data Pump作业上下文之外的Data Pump转储文件的信息。此示例显示<a href="using-oracle_datapump-api.html#GUID-5AAC848B-5A2B-4FD1-97ED-D3A048263118__I1006610">示例6-1中</a>的示例PL / SQL脚本创建的<code class="codeph">example1.dmp</code>转储文件中包含的信息。
                     </p>
                     <p>此PL / SQL脚本还可用于显示由原始导出（ <code class="codeph">exp</code>实用程序）以及<code class="codeph">ORACLE_DATAPUMP</code>外部表访问驱动程序创建的转储文件的信息。
                     </p>
                     <p>以用户<code class="codeph">SYSTEM</code>身份连接以使用此脚本。
                     </p><pre class="oac_no_warn" dir="ltr">SET VERIFY OFF
SET FEEDBACK OFF
 
DECLARE
  ind        NUMBER;
  fileType   NUMBER;
  value      VARCHAR2(2048);
  infoTab    KU$_DUMPFILE_INFO := KU$_DUMPFILE_INFO();
 
BEGIN
  --
  -- Get the information about the dump file into the infoTab.
  --
  BEGIN
    DBMS_DATAPUMP.GET_DUMPFILE_INFO('example1.dmp','DMPDIR',infoTab,fileType);
    DBMS_OUTPUT.PUT_LINE('---------------------------------------------');
    DBMS_OUTPUT.PUT_LINE('Information for file: example1.dmp');
 
    --
    -- Determine what type of file is being looked at.
    --
    CASE fileType
      WHEN 1 THEN
        DBMS_OUTPUT.PUT_LINE('example1.dmp is a Data Pump dump file');
      WHEN 2 THEN
        DBMS_OUTPUT.PUT_LINE('example1.dmp is an Original Export dump file');
      WHEN 3 THEN
        DBMS_OUTPUT.PUT_LINE('example1.dmp is an External Table dump file');
      ELSE
        DBMS_OUTPUT.PUT_LINE('example1.dmp is not a dump file');
        DBMS_OUTPUT.PUT_LINE('---------------------------------------------');
    END CASE;
 
  EXCEPTION
    WHEN OTHERS THEN
      DBMS_OUTPUT.PUT_LINE('---------------------------------------------');
      DBMS_OUTPUT.PUT_LINE('Error retrieving information for file: ' ||
                           'example1.dmp');
      DBMS_OUTPUT.PUT_LINE(SQLERRM);
      DBMS_OUTPUT.PUT_LINE('---------------------------------------------');
      fileType := 0;
  END;
 
  --
  -- If a valid file type was returned, then loop through the infoTab and 
  -- display each item code and value returned.
  --
  IF fileType &gt; 0
  THEN
    DBMS_OUTPUT.PUT_LINE('The information table has ' || 
                          TO_CHAR(infoTab.COUNT) || ' entries');
    DBMS_OUTPUT.PUT_LINE('---------------------------------------------');
 
    ind := infoTab.FIRST;
    WHILE ind IS NOT NULL
    LOOP
      --
      -- The following item codes return boolean values in the form
      -- of a '1' or a '0'. Display them as 'Yes' or 'No'.
      --
      value := NVL(infoTab(ind).value, 'NULL');
      IF infoTab(ind).item_code IN
         (DBMS_DATAPUMP.KU$_DFHDR_MASTER_PRESENT,
          DBMS_DATAPUMP.KU$_DFHDR_DIRPATH,
          DBMS_DATAPUMP.KU$_DFHDR_METADATA_COMPRESSED,
          DBMS_DATAPUMP.KU$_DFHDR_DATA_COMPRESSED,
          DBMS_DATAPUMP.KU$_DFHDR_METADATA_ENCRYPTED,
          DBMS_DATAPUMP.KU$_DFHDR_DATA_ENCRYPTED,
          DBMS_DATAPUMP.KU$_DFHDR_COLUMNS_ENCRYPTED)
      THEN
        CASE value
          WHEN '1' THEN value := 'Yes';
          WHEN '0' THEN value := 'No';
        END CASE;
      END IF;
 
      --
      -- Display each item code with an appropriate name followed by
      -- its value.
      --
      CASE infoTab(ind).item_code
        --
        -- The following item codes have been available since Oracle
        -- Database 10g, Release 10.2.
        --
        WHEN DBMS_DATAPUMP.KU$_DFHDR_FILE_VERSION   THEN
          DBMS_OUTPUT.PUT_LINE('Dump File Version:         ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_MASTER_PRESENT THEN
          DBMS_OUTPUT.PUT_LINE('Master Table Present:      ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_GUID THEN
          DBMS_OUTPUT.PUT_LINE('Job Guid:                  ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_FILE_NUMBER THEN
          DBMS_OUTPUT.PUT_LINE('Dump File Number:          ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_CHARSET_ID  THEN
          DBMS_OUTPUT.PUT_LINE('Character Set ID:          ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_CREATION_DATE THEN
          DBMS_OUTPUT.PUT_LINE('Creation Date:             ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_FLAGS THEN
          DBMS_OUTPUT.PUT_LINE('Internal Dump Flags:       ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_JOB_NAME THEN
          DBMS_OUTPUT.PUT_LINE('Job Name:                  ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_PLATFORM THEN
          DBMS_OUTPUT.PUT_LINE('Platform Name:             ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_INSTANCE THEN
          DBMS_OUTPUT.PUT_LINE('Instance Name:             ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_LANGUAGE THEN
          DBMS_OUTPUT.PUT_LINE('Language Name:             ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_BLOCKSIZE THEN
          DBMS_OUTPUT.PUT_LINE('Dump File Block Size:      ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_DIRPATH THEN
          DBMS_OUTPUT.PUT_LINE('Direct Path Mode:          ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_METADATA_COMPRESSED THEN
          DBMS_OUTPUT.PUT_LINE('Metadata Compressed:       ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_DB_VERSION THEN
          DBMS_OUTPUT.PUT_LINE('Database Version:          ' || value);
 
        --
        -- The following item codes were introduced in Oracle Database 11g
        -- Release 11.1
        --

        WHEN DBMS_DATAPUMP.KU$_DFHDR_MASTER_PIECE_COUNT THEN
          DBMS_OUTPUT.PUT_LINE('Master Table Piece Count:  ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_MASTER_PIECE_NUMBER THEN
          DBMS_OUTPUT.PUT_LINE('Master Table Piece Number: ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_DATA_COMPRESSED THEN
          DBMS_OUTPUT.PUT_LINE('Table Data Compressed:     ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_METADATA_ENCRYPTED THEN
          DBMS_OUTPUT.PUT_LINE('Metadata Encrypted:        ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_DATA_ENCRYPTED THEN
          DBMS_OUTPUT.PUT_LINE('Table Data Encrypted:      ' || value);
        WHEN DBMS_DATAPUMP.KU$_DFHDR_COLUMNS_ENCRYPTED THEN
          DBMS_OUTPUT.PUT_LINE('TDE Columns Encrypted:     ' || value);
 
        --
        -- For the DBMS_DATAPUMP.KU$_DFHDR_ENCRYPTION_MODE item code a
        -- numeric value is returned. So examine that numeric value
        -- and display an appropriate name value for it.
        --
        WHEN DBMS_DATAPUMP.KU$_DFHDR_ENCRYPTION_MODE THEN
          CASE TO_NUMBER(value)
            WHEN DBMS_DATAPUMP.KU$_DFHDR_ENCMODE_NONE THEN
              DBMS_OUTPUT.PUT_LINE('Encryption Mode:           None');
            WHEN DBMS_DATAPUMP.KU$_DFHDR_ENCMODE_PASSWORD THEN
              DBMS_OUTPUT.PUT_LINE('Encryption Mode:           Password');
            WHEN DBMS_DATAPUMP.KU$_DFHDR_ENCMODE_DUAL THEN
              DBMS_OUTPUT.PUT_LINE('Encryption Mode:           Dual');
            WHEN DBMS_DATAPUMP.KU$_DFHDR_ENCMODE_TRANS THEN
              DBMS_OUTPUT.PUT_LINE('Encryption Mode:           Transparent');
          END CASE;
 
        --
        -- The following item codes were introduced in Oracle Database 12c
        -- Release 12.1
        --
 
        --
        -- For the DBMS_DATAPUMP.KU$_DFHDR_COMPRESSION_ALG item code a
        -- numeric value is returned. So examine that numeric value and
        -- display an appropriate name value for it.
        --
        WHEN DBMS_DATAPUMP.KU$_DFHDR_COMPRESSION_ALG THEN
          CASE TO_NUMBER(value)
            WHEN DBMS_DATAPUMP.KU$_DFHDR_CMPALG_NONE THEN
              DBMS_OUTPUT.PUT_LINE('Compression Algorithm:     None');
            WHEN DBMS_DATAPUMP.KU$_DFHDR_CMPALG_BASIC THEN
              DBMS_OUTPUT.PUT_LINE('Compression Algorithm:     Basic');
            WHEN DBMS_DATAPUMP.KU$_DFHDR_CMPALG_LOW THEN
              DBMS_OUTPUT.PUT_LINE('Compression Algorithm:     Low');
            WHEN DBMS_DATAPUMP.KU$_DFHDR_CMPALG_MEDIUM THEN
              DBMS_OUTPUT.PUT_LINE('Compression Algorithm:     Medium');
            WHEN DBMS_DATAPUMP.KU$_DFHDR_CMPALG_HIGH THEN
              DBMS_OUTPUT.PUT_LINE('Compression Algorithm:     High');
          END CASE;
        ELSE NULL;  -- Ignore other, unrecognized dump file attributes.
      END CASE;
      ind := infoTab.NEXT(ind);
    END LOOP;
  END IF;
END;
/</pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="using-oracle_datapump-api.html#GUID-EAD7AE4B-778A-4369-9842-68E026409045" title="描述Data Pump API，DBMS_DATAPUMP。">Data Pump API</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>