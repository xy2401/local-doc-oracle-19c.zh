<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can monitor an XStream In configuration by querying data dictionary views.">
      <meta name="description" content="You can monitor an XStream In configuration by querying data dictionary views.">
      <title>监控XStream</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="XStream Guide ">
      <meta property="og:description" content="You can monitor an XStream In configuration by querying data dictionary views.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="XStream Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="xstream-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-01-07T01:45:15-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="2009, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96280-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="managing-xstream-in.html" title="Previous" type="text/html">
      <link rel="next" href="troubleshooting-xstream-in.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="XStream Guide">
    <meta name="dcterms.isVersionOf" content="XSTRM">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-xstream-in.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="troubleshooting-xstream-in.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">XStream指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="xstream-in.html" property="item" typeof="WebPage"><span property="name">XStream In</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">监控XStream</li>
            </ol>
            <a id="GUID-46B54351-BA11-412B-A23F-92F44739A8F6" name="GUID-46B54351-BA11-412B-A23F-92F44739A8F6"></a><a id="XSTRM72716"></a>
            
            <h2 id="XSTRM-GUID-46B54351-BA11-412B-A23F-92F44739A8F6" class="sect2"><span class="enumeration_chapter">11</span>监控XStream</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以通过查询数据字典视图来监视XStream In配置。</p>
               <p><a id="d55916e90" class="indexterm-anchor"></a>本章提供有关监视XStream的说明。
               </p>
               <p>使用XStream In，Oracle Apply进程可用作入站服务器。因此，您还可以使用数据字典视图来应用进程来监视入站服务器。</p>
               <div class="infoboxnote" id="GUID-46B54351-BA11-412B-A23F-92F44739A8F6__GUID-86BD077C-2A30-4AE7-A1E5-FC98A2535752">
                  <p class="notep1">注意：</p>
                  <p>只要有可能，本章将<code class="codeph">ALL_</code>静态数据字典视图用于查询示例。在某些情况下， <code class="codeph">ALL_</code>视图中的信息比<code class="codeph">DBA_</code>视图中的信息更受限制。
                  </p>
                  <p>在SQL * Plus中，受信任的XStream管理员可以查询<code class="codeph">ALL_</code>和<code class="codeph">DBA_</code>视图。不受信任的XStream管理员只能查询<code class="codeph">ALL_</code>视图。
                  </p>
               </div>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="monitoring-xstream-in.html#GUID-7CF8AC35-4AB0-4466-B6F2-AE13B7CA7435">显示入站服务器的会话信息</a><br>示例说明了显示入站服务器的会话信息。
                  </li>
                  <li class="ulchildlink"><a href="monitoring-xstream-in.html#GUID-86433F0C-AA89-4277-B364-7E13287725EA">显示入站服务器的常规信息</a><br>示例说明了显示有关入站服务器的常规信息。
                  </li>
                  <li class="ulchildlink"><a href="monitoring-xstream-in.html#GUID-B18DAB66-8842-482C-8F8D-493892373721">监视组件中XStream的事件历史记录</a><br>示例说明了通过查询<code class="codeph">DBA_REPLICATION_PROCESS_EVENTS</code>视图来监视XStream In组件的事件历史记录。
                  </li>
                  <li class="ulchildlink"><a href="monitoring-xstream-in.html#GUID-58FD2C89-0214-472E-8AB5-56F773BB3B7B">显示入站服务器的状态和错误信息</a><br>示例说明了显示入站服务器的状态和错误信息。
                  </li>
                  <li class="ulchildlink"><a href="monitoring-xstream-in.html#GUID-8F223E94-B47E-470E-913F-82FCAC0074EF">显示应用入站服务器的参数设置</a><br>示例说明了显示入站服务器的应用参数设置。
                  </li>
                  <li class="ulchildlink"><a href="monitoring-xstream-in.html#GUID-00B0D22F-CD20-4404-AE18-5E7FB6E972BF">显示入站服务器的位置信息</a><br>示例说明了显示入站服务器的位置信息。
                  </li>
                  <li class="ulchildlink"><a href="monitoring-xstream-in.html#GUID-BF458EA7-35E7-4608-825F-DA99466D82E6">显示有关DML冲突处理程序的信息</a><br><code class="codeph">DBA_APPLY_DML_CONF_HANDLERS</code>视图显示有关DML冲突处理程序的信息。
                  </li>
                  <li class="ulchildlink"><a href="monitoring-xstream-in.html#GUID-9B8DF353-1A6F-472D-A145-B9C145038DC9">显示有关错误处理程序的信息</a><br><code class="codeph">DBA_APPLY_REPERROR_HANDLERS</code>视图显示有关DML冲突处理程序的信息。
                  </li>
                  <li class="ulchildlink"><a href="monitoring-xstream-in.html#GUID-43A987B4-7F6C-4BC3-A813-F6E062175207">检查应用错误</a><br>示例说明了检查应用错误。
                  </li>
                  <li class="ulchildlink"><a href="monitoring-xstream-in.html#GUID-505C729C-5893-4B22-A981-33BF3084C67B">显示有关应用错误的详细信息</a><br>SQL脚本显示有关数据库中错误队列中的错误事务的详细信息。
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-46B54351-BA11-412B-A23F-92F44739A8F6__GUID-E30081A2-33F7-4917-A48F-1BA3EAFFB6CB">
                  <p class="notep1">也可以看看：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><span class="q">“ <a href="xstream-out-concepts.html#GUID-B59B1F79-91F6-4495-B946-5DCEB317E0D6" title="熟悉与XStream Out相关的概念。">XStream Out Concepts</a> ”</span></p>
                     </li>
                     <li>
                        <p><span class="q">“ <a href="introduction-to-xstream.html#GUID-21FC23DF-2881-4CFD-AF74-9A1173D768FF" title="有几种常见的XStream用例。">XStream用例</a> ”</span></p>
                     </li>
                     <li>
                        <p><span class="q">“ <a href="troubleshooting-xstream-in.html#GUID-5A6A993B-2196-4D5A-BB8A-9E5A8E2B641D" title="您可以使用XStream In配置诊断和更正问题。">排除XStream故障</a> ”</span></p>
                     </li>
                  </ul>
               </div>
               <div class="familylinks">
                  <div class="parentlink">
                     <p><strong>父主题：</strong> <a href="xstream-in.html#GUID-D7F5E262-D5D6-4286-95CD-E69FFB8DAAAE" title="您可以配置和管理XStream In环境。">XStream In</a></p>
                  </div>
               </div>
            </div>
            <a id="XSTRM72898"></a><div class="props_rev_3"><a id="GUID-7CF8AC35-4AB0-4466-B6F2-AE13B7CA7435" name="GUID-7CF8AC35-4AB0-4466-B6F2-AE13B7CA7435"></a><h3 id="XSTRM-GUID-7CF8AC35-4AB0-4466-B6F2-AE13B7CA7435" class="sect3"><span class="enumeration_section">11.1</span>显示入站服务器的会话信息</h3>
               <div>
                  <p>示例说明了显示入站服务器的会话信息。</p>
                  <div class="section">
                     <p>本节中的查询显示有关数据库中每个XStream组件的以下会话信息：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>XStream组件名称</p>
                        </li>
                        <li>
                           <p>会话标识符</p>
                        </li>
                        <li>
                           <p>序列号</p>
                        </li>
                        <li>
                           <p>操作系统进程标识号</p>
                        </li>
                        <li>
                           <p>XStream进程号</p>
                        </li>
                     </ul>
                     <p>当数据库中配置了多个XStream In组件时，此查询对于确定特定XStream组件的会话信息特别有用。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-7CF8AC35-4AB0-4466-B6F2-AE13B7CA7435__GUID-14CBD4E6-A6A5-4613-B7B4-C0B9BA847F34">要为数据库中的每个XStream组件显示此信息：</p>
                     <ol>
                        <li>
                           <p>以XStream管理员身份连接到数据库。</p>
                           <p>有关在SQL * Plus中连接到数据库的信息，请参见“ <a href="../admin/index.html" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                           </p>
                        </li>
                        <li>
                           <p>运行以下查询：</p><pre class="oac_no_warn" dir="ltr">COLUMN ACTION HEADING 'XStream Component' FORMAT A30
COLUMN SID HEADING 'Session ID' FORMAT 99999
COLUMN SERIAL# HEADING 'Session|Serial|Number' FORMAT 99999999
COLUMN PROCESS HEADING 'Operating System|Process Number' FORMAT A17
COLUMN PROCESS_NAME HEADING 'XStream|Process|Number' FORMAT A7
 
SELECT /*+PARAM('_module_action_old_length',0)*/ ACTION,
       SID,
       SERIAL#,
       PROCESS,
       SUBSTR(PROGRAM,INSTR(PROGRAM,'(')+1,4) PROCESS_NAME
  FROM V$SESSION
  WHERE MODULE ='XStream';
</pre></li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>您在XStream In配置中的输出类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">                                            Session                   XStream
                                             Serial Operating System  Process
XStream Component              Session ID    Number Process Number    Number
------------------------------ ---------- --------- ----------------- -------
XIN - Apply Reader                     19         9 27304             AS01
XIN - Apply Server                     22         5 27308             AS03
XIN - Apply Server                     25        31 27313             AS05
XIN - Apply Coordinator               112         7 27302             AP01
XIN - Apply Server                    113         5 27306             AS02
XIN - Propagation Receiver            114        17 27342             TNS
XIN - Apply Server                    115        39 27311             AS04
</pre><p>显示XStream进程号的<code class="codeph">TNS</code>的行包含有关连接到入站服务器的XStream客户端应用程序的会话的信息。
                     </p>
                     <div class="infoboxnote" id="GUID-7CF8AC35-4AB0-4466-B6F2-AE13B7CA7435__GUID-DB840FD3-F031-4422-8E2F-55F9C0B5076B">
                        <p class="notep1">注意：</p>
                        <p>要运行此查询，用户必须具有查询<code class="codeph">V$SESSION</code>视图所需的权限。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-7CF8AC35-4AB0-4466-B6F2-AE13B7CA7435__GUID-7850C59E-F31A-4BE5-BB96-CFDE2384CB2A">
                     <p class="notep1">也可以看看：</p>
                     <p>有关<code class="codeph">V$SESSION</code>视图的更多信息，请<a href="../refrn/V-SESSION.html#REFRN30223" target="_blank"><span><cite>参见Oracle数据库参考</cite></span></a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="monitoring-xstream-in.html#GUID-46B54351-BA11-412B-A23F-92F44739A8F6" title="您可以通过查询数据字典视图来监视XStream In配置。">监视XStream In</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="XSTRM1443"></a><div class="props_rev_3"><a id="GUID-86433F0C-AA89-4277-B364-7E13287725EA" name="GUID-86433F0C-AA89-4277-B364-7E13287725EA"></a><h3 id="XSTRM-GUID-86433F0C-AA89-4277-B364-7E13287725EA" class="sect3"><span class="enumeration_section">11.2</span>显示入站服务器的常规信息</h3>
               <div>
                  <p>示例说明了显示有关入站服务器的常规信息。</p>
                  <div class="section">
                     <p>您可以通过运行本节中的查询来显示入站服务器的以下信息：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>入站服务器名称</p>
                        </li>
                        <li>
                           <p>入站服务器使用的队列的所有者</p>
                        </li>
                        <li>
                           <p>入站服务器使用的队列名称</p>
                        </li>
                        <li>
                           <p>入站服务器的应用用户</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-86433F0C-AA89-4277-B364-7E13287725EA__GUID-3F4F9B2C-8DAD-4E26-846F-BA16A341024E">要显示有关入站服务器的常规信息：</p>
                     <ol>
                        <li>
                           <p>以XStream管理员身份连接到数据库。</p>
                           <p>有关在SQL * Plus中连接到数据库的信息，请参见“ <a href="../admin/index.html" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                           </p>
                        </li>
                        <li>
                           <p>运行以下查询：</p><pre class="oac_no_warn" dir="ltr">COLUMN SERVER_NAME HEADING 'Inbound Server Name' FORMAT A20
COLUMN QUEUE_OWNER HEADING 'Queue Owner' FORMAT A15
COLUMN QUEUE_NAME HEADING 'Queue Name' FORMAT A15
COLUMN APPLY_USER HEADING 'Apply User' FORMAT A15
 
SELECT SERVER_NAME, 
       QUEUE_OWNER,
       QUEUE_NAME,
       APPLY_USER
  FROM ALL_XSTREAM_INBOUND;
</pre></li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>您的输出类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">Inbound Server Name  Queue Owner     Queue Name      Apply User
-------------------- --------------- --------------- ---------------
XIN                  XSTRMADMIN      XIN_QUEUE       XSTRMADMIN
</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-86433F0C-AA89-4277-B364-7E13287725EA__GUID-4DDBAA72-0659-46CC-AE7C-C41B687855D1">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../refrn/ALL_XSTREAM_INBOUND.html#REFRN20734" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="monitoring-xstream-in.html#GUID-46B54351-BA11-412B-A23F-92F44739A8F6" title="您可以通过查询数据字典视图来监视XStream In配置。">监视XStream In</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="props_rev_3"><a id="GUID-B18DAB66-8842-482C-8F8D-493892373721" name="GUID-B18DAB66-8842-482C-8F8D-493892373721"></a><h3 id="XSTRM-GUID-B18DAB66-8842-482C-8F8D-493892373721" class="sect3"><span class="enumeration_section">11.3</span>监视组件中XStream的事件历史记录</h3>
               <div>
                  <p>示例说明了通过查询<code class="codeph">DBA_REPLICATION_PROCESS_EVENTS</code>视图来监视XStream In组件的事件历史记录。
                  </p>
                  <div class="section">
                     <p>例如，此视图可以在创建或启动组件时显示。它还可以在组件参数更改时显示。如果组件遇到错误，则它可以显示有关错误的信息。</p>
                     <p>本主题中的查询显示有关XStream Out组件事件的以下信息：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>XStream组件名称</p>
                        </li>
                        <li>
                           <p>组件类型</p>
                        </li>
                        <li>
                           <p>事件名称</p>
                        </li>
                        <li>
                           <p>事件的描述</p>
                        </li>
                        <li>
                           <p>活动时间</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-B18DAB66-8842-482C-8F8D-493892373721__GUID-9B42B76A-61F2-41E6-AD24-C36C601044BC">要为数据库中的每个XStream In组件显示此信息：</p>
                     <ol>
                        <li>
                           <p>以XStream管理员身份连接到数据库。</p>
                           <p>有关在SQL * Plus中连接到数据库的信息，请参见“ <a href="../admin/index.html" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                           </p>
                        </li>
                        <li>
                           <p>运行以下查询：</p><pre class="oac_no_warn" dir="ltr">COLUMN STREAMS_NAME FORMAT A12
COLUMN PROCESS_TYPE FORMAT A17
COLUMN EVENT_NAME FORMAT A10
COLUMN DESCRIPTION FORMAT A20
COLUMN EVENT_TIME FORMAT A15

SELECT STREAMS_NAME,
       PROCESS_TYPE,
       EVENT_NAME,
       DESCRIPTION,
       EVENT_TIME
  FROM DBA_REPLICATION_PROCESS_EVENTS;
</pre></li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>您在XStream In配置中的输出类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">STREAMS_NAME PROCESS_TYPE      EVENT_NAME DESCRIPTION          EVENT_TIME
------------ ----------------- ---------- -------------------- ---------------
APP_JOBS     APPLY COORDINATOR CREATE     SUCCESS              03-NOV-15 07.19
                                                               .27.238151 AM
APP_JOBS     APPLY COORDINATOR START      SUCCESS              03-NOV-15 07.21
                                                               .50.812534 AM
APP_JOBS     APPLY READER      START      SUCCESS              03-NOV-15 07.21
                                                               .51.713367 AM
APP_JOBS     APPLY SERVER      START      SUCCESS              03-NOV-15 07.21
                                                               .51.895019 AM
</pre></div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="../refrn/ALL_REPLICATION_PROCESS_EVENTS.html#REFRN-GUID-E994A792-BDF6-43CD-959D-F8584B51A5D3" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="monitoring-xstream-in.html#GUID-46B54351-BA11-412B-A23F-92F44739A8F6" title="您可以通过查询数据字典视图来监视XStream In配置。">监视XStream In</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="XSTRM1444"></a><div class="props_rev_3"><a id="GUID-58FD2C89-0214-472E-8AB5-56F773BB3B7B" name="GUID-58FD2C89-0214-472E-8AB5-56F773BB3B7B"></a><h3 id="XSTRM-GUID-58FD2C89-0214-472E-8AB5-56F773BB3B7B" class="sect3"><span class="enumeration_section">11.4</span>显示入站服务器的状态和错误信息</h3>
               <div>
                  <p>示例说明了显示入站服务器的状态和错误信息。</p>
                  <div class="section">
                     <p><code class="codeph">DBA_APPLY</code>视图在<code class="codeph">PURPOSE</code>列中显示作为入站服务器的应用进程的<code class="codeph">XStream</code> <code class="codeph">In</code> 。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-58FD2C89-0214-472E-8AB5-56F773BB3B7B__GUID-4F48A9E2-1E86-4AB8-BA66-9D26B2DBDB16">要显示入站服务器的状态：</p>
                     <ol>
                        <li>
                           <p>以XStream管理员身份连接到数据库。</p>
                           <p>有关在SQL * Plus中连接到数据库的信息，请参见“ <a href="../admin/index.html" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                           </p>
                        </li>
                        <li>
                           <p>运行以下查询：</p><pre class="oac_no_warn" dir="ltr">COLUMN APPLY_NAME HEADING 'Inbound Server|Name' FORMAT A15
COLUMN STATUS HEADING 'Status' FORMAT A8
COLUMN ERROR_NUMBER HEADING 'Error Number' FORMAT 9999999
COLUMN ERROR_MESSAGE HEADING 'Error Message' FORMAT A40

SELECT APPLY_NAME, 
       STATUS,
       ERROR_NUMBER,
       ERROR_MESSAGE
  FROM DBA_APPLY
  WHERE PURPOSE = 'XStream In';
</pre></li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>您的输出类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">Inbound Server
Name            Status   Error Number Error Message
--------------- -------- ------------ ----------------------------------------
XIN             ENABLED
</pre><p>此输出显示<code class="codeph">XIN</code>是作为入站服务器运行的应用进程。
                     </p>
                     <div class="infoboxnote" id="GUID-58FD2C89-0214-472E-8AB5-56F773BB3B7B__GUID-4F3F8219-5454-4EA3-8ABC-1143A491AA27">
                        <p class="notep1">注意：</p>
                        <p>此示例查询<code class="codeph">DBA_APPLY</code>视图。此视图使受信任的用户可以查看数据库中所有应用用户的信息。不受信任的用户必须查询<code class="codeph">ALL_APPLY</code>视图，该视图将信息限制为当前用户。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-58FD2C89-0214-472E-8AB5-56F773BB3B7B__GUID-AE34290C-06E1-4068-ACCB-21C36574BEAA">
                     <p class="notep1">也可以看看：</p>
                     <p><a href="../refrn/ALL_APPLY.html#REFRN20005" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="monitoring-xstream-in.html#GUID-46B54351-BA11-412B-A23F-92F44739A8F6" title="您可以通过查询数据字典视图来监视XStream In配置。">监视XStream In</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="XSTRM72899"></a><div class="props_rev_3"><a id="GUID-8F223E94-B47E-470E-913F-82FCAC0074EF" name="GUID-8F223E94-B47E-470E-913F-82FCAC0074EF"></a><h3 id="XSTRM-GUID-8F223E94-B47E-470E-913F-82FCAC0074EF" class="sect3"><span class="enumeration_section">11.5</span>显示入站服务器的应用参数设置</h3>
               <div>
                  <p>示例说明了显示入站服务器的应用参数设置。</p>
                  <div class="section">
                     <p>应用参数确定入站服务器的运行方式。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-8F223E94-B47E-470E-913F-82FCAC0074EF__GUID-BECAA5D7-9FC1-4044-A23A-D5FB8864384E">要显示入站服务器的apply参数设置：</p>
                     <ol>
                        <li>
                           <p>以XStream管理员身份连接到数据库。</p>
                           <p>有关在SQL * Plus中连接到数据库的信息，请参见“ <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=ADMIN00102" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                           </p>
                        </li>
                        <li>
                           <p>运行以下查询：</p><pre class="oac_no_warn" dir="ltr">COLUMN APPLY_NAME HEADING 'Inbound Server|Name' FORMAT A15
COLUMN PARAMETER HEADING 'Parameter' FORMAT A30
COLUMN VALUE HEADING 'Value' FORMAT A22
COLUMN SET_BY_USER HEADING 'Set by|User?' FORMAT A10

SELECT APPLY_NAME,
       PARAMETER, 
       VALUE,
       SET_BY_USER  
  FROM ALL_APPLY_PARAMETERS a, ALL_XSTREAM_INBOUND i
  WHERE a.APPLY_NAME=i.SERVER_NAME
  ORDER BY a.PARAMETER;
</pre></li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>您的输出类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">Inbound Server                                                        Set by
Name            Parameter                      Value                  User?
--------------- ------------------------------ ---------------------- ----------
XIN             ALLOW_DUPLICATE_ROWS           N                      NO
XIN             APPLY_SEQUENCE_NEXTVAL         Y                      NO
XIN             COMMIT_SERIALIZATION           DEPENDENT_TRANSACTIONS NO
XIN             COMPARE_KEY_ONLY               Y                      NO
XIN             COMPUTE_LCR_DEP_ON_ARRIVAL     N                      NO
XIN             DISABLE_ON_ERROR               Y                      NO
XIN             DISABLE_ON_LIMIT               N                      NO
XIN             EAGER_SIZE                     9500                   NO
XIN             ENABLE_XSTREAM_TABLE_STATS     Y                      NO
XIN             EXCLUDETAG                                            NO
XIN             EXCLUDETRANS                                          NO
XIN             EXCLUDEUSER                                           NO
XIN             EXCLUDEUSERID                                         NO
XIN             GETAPPLOPS                     Y                      NO
XIN             GETREPLICATES                  N                      NO
XIN             GROUPTRANSOPS                  250                    NO
XIN             HANDLECOLLISIONS               N                      NO
XIN             IGNORE_TRANSACTION                                    NO
XIN             MAXIMUM_SCN                    INFINITE               NO
XIN             MAX_PARALLELISM                50                     NO
XIN             MAX_SGA_SIZE                   INFINITE               NO
XIN             OPTIMIZE_PROGRESS_TABLE        Y                      NO
XIN             OPTIMIZE_SELF_UPDATES          Y                      NO
XIN             PARALLELISM                    4                      NO
XIN             PRESERVE_ENCRYPTION            Y                      NO
XIN             RTRIM_ON_IMPLICIT_CONVERSION   Y                      NO
XIN             STARTUP_SECONDS                0                      NO
XIN             SUPPRESSTRIGGERS               Y                      NO
XIN             TIME_LIMIT                     INFINITE               NO
XIN             TRACE_LEVEL                    0                      NO
XIN             TRANSACTION_LIMIT              INFINITE               NO
XIN             TXN_AGE_SPILL_THRESHOLD        900                    NO
XIN             TXN_LCR_SPILL_THRESHOLD        10000                  NO
XIN             WRITE_ALERT_LOG                Y                      NO
</pre><p>入站服务器忽略一些应用参数设置。</p>
                     <div class="infoboxnote" id="GUID-8F223E94-B47E-470E-913F-82FCAC0074EF__GUID-F731C25E-FD79-496A-BEB8-271F0C7DD476">
                        <p class="notep1">注意：</p>
                        <p>如果<code class="codeph">Set</code> <code class="codeph">by</code> <code class="codeph">User?</code> 如果参数的<code class="codeph">NO</code> ，则将参数设置为其默认值。如果<code class="codeph">Set</code> <code class="codeph">by</code> <code class="codeph">User?</code> 对于参数， <code class="codeph">YES</code> ，则参数由用户设置，可能会也可能不会设置为其默认值。
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-8F223E94-B47E-470E-913F-82FCAC0074EF__GUID-4E9AA80E-0AD9-407C-BE50-5D74A659A498">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="managing-xstream-in.html#GUID-238AFFE0-AA5A-4667-8323-0BA300821BB5" title="应用参数控制入站服务器的运行方式。您可以使用DBMS_XSTREAM_ADM程序包中的SET_PARAMETER过程为入站服务器设置apply参数。">为入站服务器设置应用参数</a> ”</span></p>
                        </li>
                        <li>
                           <p>有关应用参数的信息<a href="../arpls/DBMS_APPLY_ADM.html#ARPLS314" target="_blank"><span><cite>，请参见Oracle Database PL / SQL包和类型参考</cite></span></a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="monitoring-xstream-in.html#GUID-46B54351-BA11-412B-A23F-92F44739A8F6" title="您可以通过查询数据字典视图来监视XStream In配置。">监视XStream In</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="XSTRM1634"></a><div class="props_rev_3"><a id="GUID-00B0D22F-CD20-4404-AE18-5E7FB6E972BF" name="GUID-00B0D22F-CD20-4404-AE18-5E7FB6E972BF"></a><h3 id="XSTRM-GUID-00B0D22F-CD20-4404-AE18-5E7FB6E972BF" class="sect3"><span class="enumeration_section">11.6</span>显示入站服务器的位置信息</h3>
               <div>
                  <p>示例说明了显示入站服务器的位置信息。</p>
                  <div class="section">
                     <p>对于入站服务器，您可以通过查询<code class="codeph">ALL_XSTREAM_INBOUND_PROGRESS</code>视图来查看位置信息。具体来说，您可以通过在此部分中运行查询来显示以下位置信息：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>入站服务器名称</p>
                        </li>
                        <li>
                           <p>应用入站服务器的低位置</p>
                        </li>
                        <li>
                           <p>入站服务器的溢出位置</p>
                        </li>
                        <li>
                           <p>入站服务器的应用高位</p>
                        </li>
                        <li>
                           <p>已处理的入站服务器的低位置</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-00B0D22F-CD20-4404-AE18-5E7FB6E972BF__GUID-1E91CEE8-B803-4522-91E0-ACA151B5F829">要显示入站服务器的位置信息：</p>
                     <ol>
                        <li>
                           <p>以XStream管理员身份连接到数据库。</p>
                           <p>有关在SQL * Plus中连接到数据库的信息，请参见“ <a href="../admin/index.html" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                           </p>
                        </li>
                        <li>
                           <p>运行以下查询：</p><pre class="oac_no_warn" dir="ltr">COLUMN SERVER_NAME HEADING 'Inbound|Server|Name' FORMAT A10
COLUMN APPLIED_LOW_POSITION HEADING 'Applied Low|Position' FORMAT A15
COLUMN SPILL_POSITION HEADING 'Spill Position' FORMAT A15
COLUMN APPLIED_HIGH_POSITION HEADING 'Applied High|Position' FORMAT A15
COLUMN PROCESSED_LOW_POSITION HEADING 'Processed Low|Position' FORMAT A15
 
SELECT SERVER_NAME, 
       APPLIED_LOW_POSITION,
       SPILL_POSITION,
       APPLIED_HIGH_POSITION,
       PROCESSED_LOW_POSITION
  FROM ALL_XSTREAM_INBOUND_PROGRESS;
</pre></li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>您的输出类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">Inbound
Server     Applied Low                     Applied High    Processed Low
Name       Position        Spill Position  Position        Position
---------- --------------- --------------- --------------- ---------------
XIN        C10A            C11D            C10A            C11D
</pre><p>输出中显示的位置值由连接到入站服务器的客户端应用程序设置。但是，入站服务器确定哪些值是当前应用的低位置，溢出位置，应用的高位置和已处理的低位置。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-00B0D22F-CD20-4404-AE18-5E7FB6E972BF__GUID-1F827D79-8AE7-4C4E-BF3B-77E210FA4221">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/19/xstrm&amp;id=REFRN20770" target="_blank"><span><cite>Oracle数据库参考</cite></span></a></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="general-xstream-concepts.html#GUID-077AAE24-54CF-4102-9969-9540608FFB65" title="每个LCR都有一个位置属性。LCR的位置标识其在交易中的LCR流中的位置。">在LCR流中定位订单</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="xstream-in-concepts.html#GUID-25617A91-D3E3-4848-9B28-90F5C00743C9" title="客户端应用程序将LCR流式传输到入站服务器中的XStream。">LCR和XStream的位置</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="monitoring-xstream-in.html#GUID-46B54351-BA11-412B-A23F-92F44739A8F6" title="您可以通过查询数据字典视图来监视XStream In配置。">监视XStream In</a></p>
                     </div>
                  </div>
               </div>
               
            </div>
            <div class="sect2"><a id="GUID-BF458EA7-35E7-4608-825F-DA99466D82E6" name="GUID-BF458EA7-35E7-4608-825F-DA99466D82E6"></a><h3 id="XSTRM-GUID-BF458EA7-35E7-4608-825F-DA99466D82E6" class="sect3"><span class="enumeration_section">11.7</span>显示有关DML冲突处理程序的信息</h3>
               <div>
                  <p><code class="codeph">DBA_APPLY_DML_CONF_HANDLERS</code>视图显示有关DML冲突处理程序的信息。
                  </p>
                  <div class="section">您可以使用<code class="codeph">DBMS_APPLY_ADM</code>程序包中的<code class="codeph">SET_DML_CONFLICT_HANDLER</code>过程配置DML冲突处理程序。
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>以XStream管理员身份连接到数据库。</span></li>
                     <li><span>查询<code class="codeph">DBA_APPLY_DML_CONF_HANDLERS</code>视图。</span></li>
                  </ol>
                  <div class="example" id="GUID-BF458EA7-35E7-4608-825F-DA99466D82E6__GUID-495A004C-080C-4B32-8D29-CC346F17A4D2">
                     <p class="titleinexample">示例11-1显示有关DML冲突处理程序的信息</p><pre class="pre codeblock"><code>COLUMN APPLY_NAME FORMAT A8
COLUMN OBJECT_OWNER FORMAT A5
COLUMN OBJECT_NAME FORMAT A12
COLUMN COMMAND_TYPE FORMAT A6
COLUMN CONFLICT_TYPE FORMAT A11
COLUMN METHOD_NAME FORMAT A12
COLUMN CONFLICT_HANDLER_NAME FORMAT A20

SELECT APPLY_NAME,
       OBJECT_OWNER, 
       OBJECT_NAME,
       COMMAND_TYPE,
       CONFLICT_TYPE, 
       METHOD_NAME, 
       CONFLICT_HANDLER_NAME
  FROM DBA_APPLY_DML_CONF_HANDLERS
  ORDER BY OBJECT_OWNER, OBJECT_NAME, CONFLICT_HANDLER_NAME;</code></pre><p>您的输出类似于以下内容：</p><pre class="pre codeblock"><code>APPLY_NA OBJEC OBJECT_NAME  COMMAN CONFLICT_TY METHOD_NAME  CONFLICT_HANDLER_NAM
-------- ----- ------------ ------ ----------- ------------ --------------------
APP_JOBS HR    JOBS         DELETE ROW_MISSING IGNORE       JOBS_HANDLER_DELETE
APP_JOBS HR    JOBS         INSERT ROW_EXISTS  OVERWRITE    JOBS_HANDLER_INSERT
APP_JOBS HR    JOBS         UPDATE ROW_EXISTS  OVERWRITE    JOBS_HANDLER_UPDATE</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="managing-xstream-in.html#GUID-D0667DF9-3E58-4C99-996A-113C9EACDC6F" title="使用DBMS_APPLY_ADM包中的SET_DML_CONFLICT_HANDLER过程设置DML冲突处理程序。">设置DML冲突处理程序</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="monitoring-xstream-in.html#GUID-46B54351-BA11-412B-A23F-92F44739A8F6" title="您可以通过查询数据字典视图来监视XStream In配置。">监视XStream In</a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-9B8DF353-1A6F-472D-A145-B9C145038DC9" name="GUID-9B8DF353-1A6F-472D-A145-B9C145038DC9"></a><h3 id="XSTRM-GUID-9B8DF353-1A6F-472D-A145-B9C145038DC9" class="sect3"><span class="enumeration_section">11.8</span>显示有关错误处理程序的信息</h3>
               <div>
                  <p><code class="codeph">DBA_APPLY_REPERROR_HANDLERS</code>视图显示有关DML冲突处理程序的信息。
                  </p>
                  <div class="section">您可以使用<code class="codeph">DBMS_APPLY_ADM</code>程序包中的<code class="codeph">SET_REPERROR_HANDLER</code>过程配置错误处理程序。
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>以XStream管理员身份连接到数据库。</span></li>
                     <li><span>查询<code class="codeph">DBA_APPLY_REPERROR_HANDLERS</code>视图。</span></li>
                  </ol>
                  <div class="example" id="GUID-9B8DF353-1A6F-472D-A145-B9C145038DC9__GUID-495A004C-080C-4B32-8D29-CC346F17A4D2">
                     <p class="titleinexample">示例11-2显示有关DML冲突处理程序的信息</p><pre class="pre codeblock"><code>COLUMN APPLY_NAME FORMAT A15
COLUMN OBJECT_OWNER FORMAT A15
COLUMN OBJECT_NAME FORMAT A15
COLUMN ERROR_NUMBER 999999999
COLUMN METHOD FORMAT A15

SELECT APPLY_NAME,
       OBJECT_OWNER, 
       OBJECT_NAME,
       ERROR_NUMBER,
       METHOD 
  FROM DBA_APPLY_REPERROR_HANDLERS
  ORDER BY OBJECT_OWNER, OBJECT_NAME;
</code></pre><p>您的输出类似于以下内容：</p><pre class="pre codeblock"><code>APPLY_NAME      OBJECT_OWNER    OBJECT_NAME     ERROR_NUMBER METHOD
--------------- --------------- --------------- ------------ ---------------
APP_OE          OE              ORDERS                 26787 IGNORE</code></pre></div>
                  <!-- class="example" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>相关话题</strong></p>
                     <ul>
                        <li><a href="managing-xstream-in.html#GUID-170B7510-A772-4900-9267-B1C7A799CD6F" title="使用DBMS_APPLY包中的SET_REPERROR_HANDLER过程设置错误处理程序。">设置和取消设置错误处理程序</a></li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="monitoring-xstream-in.html#GUID-46B54351-BA11-412B-A23F-92F44739A8F6" title="您可以通过查询数据字典视图来监视XStream In配置。">监视XStream In</a></p>
                     </div>
                  </div>
               </div>
            </div><a id="XSTRM72900"></a><div class="props_rev_3"><a id="GUID-43A987B4-7F6C-4BC3-A813-F6E062175207" name="GUID-43A987B4-7F6C-4BC3-A813-F6E062175207"></a><h3 id="XSTRM-GUID-43A987B4-7F6C-4BC3-A813-F6E062175207" class="sect3"><span class="enumeration_section">11.9</span>检查应用错误</h3>
               <div>
                  <p>示例说明了检查应用错误。</p>
                  <div class="section">
                     <p>受信任的用户可以通过查询<code class="codeph">DBA_APPLY_ERROR</code>数据字典视图或使用Oracle Enterprise Manager Cloud Control来检查应用错误。不受信任的用户可以通过查询<code class="codeph">ALL_APPLY_ERROR</code>数据字典视图来检查应用错误。
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-43A987B4-7F6C-4BC3-A813-F6E062175207__GUID-6A3C371B-B740-4D56-813E-16661A1B429A">要检查应用错误：</p>
                     <ol>
                        <li>
                           <p>以XStream管理员身份连接到数据库。</p>
                           <p>有关在SQL * Plus中连接到数据库的信息，请参见“ <a href="../admin/index.html" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                           </p>
                        </li>
                        <li>
                           <p>运行以下查询：</p><pre class="oac_no_warn" dir="ltr">COLUMN APPLY_NAME HEADING 'Inbound|Server|Name' FORMAT A7
COLUMN SOURCE_DATABASE HEADING 'Source|Database' FORMAT A8
COLUMN SOURCE_TRANSACTION_ID HEADING 'Source|Transaction|ID' FORMAT A11
COLUMN MESSAGE_NUMBER HEADING 'Failed Message|in Error|Transaction' FORMAT 99999999
COLUMN ERROR_NUMBER HEADING 'Error Number' FORMAT 99999999
COLUMN ERROR_MESSAGE HEADING 'Error Message' FORMAT A10
COLUMN MESSAGE_COUNT HEADING 'Messages in|Error|Transaction' FORMAT 99999999

SELECT APPLY_NAME, 
       SOURCE_DATABASE, 
       SOURCE_TRANSACTION_ID, 
       MESSAGE_NUMBER,
       ERROR_NUMBER,
       ERROR_MESSAGE,
       MESSAGE_COUNT
  FROM ALL_APPLY_ERROR;
</pre></li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <div class="infoboxnote" id="GUID-43A987B4-7F6C-4BC3-A813-F6E062175207__GUID-0ED52FBA-6D7B-4460-886B-53236148FA37">
                        <p class="notep1">注意：</p>
                        <p>受信任的用户应在查询中用<code class="codeph">DBA_APPLY_ERROR</code>替换<code class="codeph">ALL_APPLY_ERROR</code> 。
                        </p>
                     </div>
                     <p>如果存在任何应用错误，那么您的输出类似于以下内容：</p><pre class="oac_no_warn" dir="ltr">Inbound          Source      Failed Message                         Messages in
Server  Source   Transaction       in Error                               Error
Name    Database ID             Transaction Error Number Error Mess Transaction
------- -------- ----------- -------------- ------------ ---------- -----------
XIN     OUTX.EXA 19.20.215                1         1031 ORA-01031:           1
        MPLE.COM                                          insuffici
                                                         ent privil
                                                         eges
XIN     OUTX.EXA 11.21.158                1         1031 ORA-01031:           1
        MPLE.COM                                          insuffici
                                                         ent privil
                                                         eges
</pre><p>如果存在应用错误，则可以尝试重新执行遇到错误的事务，也可以删除事务。要重新执行遇到错误的事务，请首先更正导致事务引发错误的条件。</p>
                     <p>如果要删除遇到错误的事务，并且要在多个数据库之间共享数据，则可能需要手动重新同步数据。如有必要，请记住在手动重新同步数据时设置适当的会话标记。</p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="infoboxnotealso" id="GUID-43A987B4-7F6C-4BC3-A813-F6E062175207__GUID-D9BDF9A0-2E5A-4843-A149-7C3DEF02D9A9">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="xstream-in-concepts.html#GUID-5602248A-8DE3-495B-B1E9-F1F61CC798C3" title="错误队列包含数据库的所有当前应用错误。如果数据库中有多个入站服务器，则错误队列包含每个入站服务器的应用错误。">入站服务器的错误队列</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="managing-xstream-in.html#GUID-52AE0882-647F-4C68-89DD-E1D658569BA7" title="当入站服务器尝试应用LCR时，应用错误结果，并引发错误。">管理应用错误</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="monitoring-xstream-in.html#GUID-46B54351-BA11-412B-A23F-92F44739A8F6" title="您可以通过查询数据字典视图来监视XStream In配置。">监视XStream In</a></p>
                     </div>
                  </div>
               </div>
               
            </div><a id="XSTRM72901"></a><div class="props_rev_3"><a id="GUID-505C729C-5893-4B22-A981-33BF3084C67B" name="GUID-505C729C-5893-4B22-A981-33BF3084C67B"></a><h3 id="XSTRM-GUID-505C729C-5893-4B22-A981-33BF3084C67B" class="sect3"><span class="enumeration_section">11.10</span>显示应用错误的详细信息</h3>
               <div>
                  <p>SQL脚本显示有关数据库中错误队列中的错误事务的详细信息。</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="monitoring-xstream-in.html#GUID-594AF23D-BE6E-4EA1-BA18-25C4F5ADBB87">步骤1：在ALL_APPLY_ERROR视图上授予显式SELECT权限</a><br>在用户的<code class="codeph">DBMS_XSTREAM_AUTH</code>包中运行<code class="codeph">GRANT_ADMIN_PRIVILEGE</code>过程<code class="codeph">DBMS_XSTREAM_AUTH</code> <code class="codeph">ALL_APPLY_ERROR</code>视图的<code class="codeph">SELECT</code>权限授予用户。
                     </li>
                     <li class="ulchildlink"><a href="monitoring-xstream-in.html#GUID-04D3B1E9-8AF4-4D47-9857-87056038B667">第2步：创建一个在ANYDATA对象中打印值的过程</a><br>创建一个过程，该过程在指定的<code class="codeph">ANYDATA</code>对象中打印某些选定数据类型的值。（可选）您可以向此过程添加更多数据类型。
                     </li>
                     <li class="ulchildlink"><a href="monitoring-xstream-in.html#GUID-E471ED4F-7EE1-4D5B-ACE5-2298F6EF30D7">步骤3：创建打印指定LCR的过程</a><br>创建一个打印指定LCR的过程。</li>
                     <li class="ulchildlink"><a href="monitoring-xstream-in.html#GUID-9BF31D03-3451-4C42-8B50-4E185C7B2007">步骤4：创建一个打印错误队列中所有LCR的过程</a><br>创建一个过程，打印所有错误队列中的所有LCR。
                     </li>
                     <li class="ulchildlink"><a href="monitoring-xstream-in.html#GUID-E7D5279F-3F3A-431B-B25F-5D3C699208DC">步骤5：创建一个打印事务的所有错误LCR的过程</a><br>创建一个过程，打印特定事务的错误队列中的所有LCR。
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-505C729C-5893-4B22-A981-33BF3084C67B__GUID-91920954-FFDF-4A04-873A-383CE15CED77">
                     <p class="notep1">也可以看看：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><span class="q">“ <a href="xstream-in-concepts.html#GUID-5602248A-8DE3-495B-B1E9-F1F61CC798C3" title="错误队列包含数据库的所有当前应用错误。如果数据库中有多个入站服务器，则错误队列包含每个入站服务器的应用错误。">入站服务器的错误队列</a> ”</span></p>
                        </li>
                        <li>
                           <p><span class="q">“ <a href="managing-xstream-in.html#GUID-52AE0882-647F-4C68-89DD-E1D658569BA7" title="当入站服务器尝试应用LCR时，应用错误结果，并引发错误。">管理应用错误</a> ”</span></p>
                        </li>
                     </ul>
                  </div>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="monitoring-xstream-in.html#GUID-46B54351-BA11-412B-A23F-92F44739A8F6" title="您可以通过查询数据字典视图来监视XStream In配置。">监视XStream In</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="props_rev_3"><a id="GUID-594AF23D-BE6E-4EA1-BA18-25C4F5ADBB87" name="GUID-594AF23D-BE6E-4EA1-BA18-25C4F5ADBB87"></a><h4 id="XSTRM-GUID-594AF23D-BE6E-4EA1-BA18-25C4F5ADBB87" class="sect4"><span class="enumeration_section">11.10.1</span>步骤1：在ALL_APPLY_ERROR视图上授予显式SELECT权限</h4>
                  <div>
                     <p>在用户的<code class="codeph">DBMS_XSTREAM_AUTH</code>包中运行<code class="codeph">GRANT_ADMIN_PRIVILEGE</code>过程<code class="codeph">DBMS_XSTREAM_AUTH</code> <code class="codeph">ALL_APPLY_ERROR</code>视图的<code class="codeph">SELECT</code>权限授予用户。
                     </p>
                     <div class="section">
                        <p>必须为<code class="codeph">ALL_APPLY_ERROR</code>数据字典视图授予创建和运行以下部分中描述的<code class="codeph">print_errors</code>和<code class="codeph">print_transaction</code>过程的用户显式<code class="codeph">SELECT</code>权限。无法通过角色授予此权限。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-594AF23D-BE6E-4EA1-BA18-25C4F5ADBB87__GUID-047DB544-CCFB-439F-A27C-991A1CEC391B">要为<code class="codeph">ALL_APPLY_ERROR</code>视图授予显式SELECT权限：</p>
                        <ol>
                           <li>
                              <p>在SQL * Plus中，以可授予权限的管理用户身份进行连接。</p>
                              <p>有关在SQL * Plus中连接到数据库的信息，请参见“ <a href="../admin/index.html" target="_blank"><span><cite>Oracle数据库管理员指南”</cite></span></a> 。
                              </p>
                           </li>
                           <li id="GUID-594AF23D-BE6E-4EA1-BA18-25C4F5ADBB87__CJHEGIFF">
                              <p>将<code class="codeph">ALL_APPLY_ERROR</code>数据字典视图的<code class="codeph">SELECT</code>权限授予适当的用户。例如，要将此权限授予<code class="codeph">xstrmadmin</code>用户，请运行以下语句：</p><pre class="oac_no_warn" dir="ltr">GRANT SELECT ON ALL_APPLY_ERROR TO xstrmadmin;
</pre></li>
                           <li id="GUID-594AF23D-BE6E-4EA1-BA18-25C4F5ADBB87__CJHFIHID">
                              <p>授予<code class="codeph">DBMS_APPLY_ADM</code>包的<code class="codeph">EXECUTE</code>特权。例如，要将此权限授予<code class="codeph">xstrmadmin</code>用户，请运行以下语句：</p><pre class="oac_no_warn" dir="ltr">GRANT EXECUTE ON DBMS_APPLY_ADM TO xstrmadmin;
</pre></li>
                           <li>
                              <p>以在步骤<a href="monitoring-xstream-in.html#GUID-594AF23D-BE6E-4EA1-BA18-25C4F5ADBB87__CJHEGIFF">2</a>和<a href="monitoring-xstream-in.html#GUID-594AF23D-BE6E-4EA1-BA18-25C4F5ADBB87__CJHFIHID">3中</a>向您授予权限的用户身份连接到数据库。
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="monitoring-xstream-in.html#GUID-505C729C-5893-4B22-A981-33BF3084C67B" title="SQL脚本显示有关数据库中错误队列中的错误事务的详细信息。">显示有关应用错误的详细信息</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-04D3B1E9-8AF4-4D47-9857-87056038B667" name="GUID-04D3B1E9-8AF4-4D47-9857-87056038B667"></a><h4 id="XSTRM-GUID-04D3B1E9-8AF4-4D47-9857-87056038B667" class="sect4"><span class="enumeration_section">11.10.2</span>第2步：创建一个在ANYDATA对象中打印值的过程</h4>
                  <div>
                     <p>创建一个过程，该过程在指定的<code class="codeph">ANYDATA</code>对象中打印某些选定数据类型的值。（可选）您可以向此过程添加更多数据类型。
                     </p>
                     <div class="section"><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE print_any(data IN ANYDATA) IS
  tn  VARCHAR2(61);
  str VARCHAR2(4000);
  chr VARCHAR2(1000);
  num NUMBER;
  dat DATE;
  rw  RAW(4000);
  res NUMBER;
BEGIN
  IF data IS NULL THEN
    DBMS_OUTPUT.PUT_LINE('NULL value');
    RETURN;
  END IF;
  tn := data.GETTYPENAME();
  IF tn = 'SYS.VARCHAR2' THEN
    res := data.GETVARCHAR2(str);
    DBMS_OUTPUT.PUT_LINE(SUBSTR(str,0,253));
  ELSIF tn = 'SYS.CHAR' then
    res := data.GETCHAR(chr);
    DBMS_OUTPUT.PUT_LINE(SUBSTR(chr,0,253));
  ELSIF tn = 'SYS.VARCHAR' THEN
    res := data.GETVARCHAR(chr);
    DBMS_OUTPUT.PUT_LINE(chr);
  ELSIF tn = 'SYS.NUMBER' THEN
    res := data.GETNUMBER(num);
    DBMS_OUTPUT.PUT_LINE(num);
  ELSIF tn = 'SYS.DATE' THEN
    res := data.GETDATE(dat);
    DBMS_OUTPUT.PUT_LINE(dat);
  ELSIF tn= 'SYS.TIMESTAMP' THEN
    res := data.GETTIMESTAMP(dat);
    DBMS_OUTPUT.PUT_LINE(TO_CHAR(dat,'DD-MON-RR HH.MI.SSXFF AM'));
  ELSIF tn= 'SYS.TIMESTAMPTZ' THEN
    res := data.GETTIMESTAMPTZ(dat);
    DBMS_OUTPUT.PUT_LINE(TO_CHAR(dat,'DD-MON-RR HH.MI.SSXFF AM'));
  ELSIF tn= 'SYS.TIMESTAMPLTZ' THEN
    res := data.GETTIMESTAMPLTZ(dat);
    DBMS_OUTPUT.PUT_LINE(TO_CHAR(dat,'DD-MON-RR HH.MI.SSXFF AM'));
  ELSIF tn = 'SYS.RAW' THEN
    -- res := data.GETRAW(rw);
    -- DBMS_OUTPUT.PUT_LINE(SUBSTR(DBMS_LOB.SUBSTR(rw),0,253));
    DBMS_OUTPUT.PUT_LINE('BLOB Value');
  ELSIF tn = 'SYS.BLOB' THEN
    DBMS_OUTPUT.PUT_LINE('BLOB Found');
  ELSE
    DBMS_OUTPUT.PUT_LINE('typename is ' || tn);
  END IF;
END print_any;
/</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="monitoring-xstream-in.html#GUID-505C729C-5893-4B22-A981-33BF3084C67B" title="SQL脚本显示有关数据库中错误队列中的错误事务的详细信息。">显示有关应用错误的详细信息</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-E471ED4F-7EE1-4D5B-ACE5-2298F6EF30D7" name="GUID-E471ED4F-7EE1-4D5B-ACE5-2298F6EF30D7"></a><h4 id="XSTRM-GUID-E471ED4F-7EE1-4D5B-ACE5-2298F6EF30D7" class="sect4"><span class="enumeration_section">11.10.3</span>步骤3：创建打印指定LCR的过程</h4>
                  <div>
                     <p>创建一个打印指定LCR的过程。</p>
                     <div class="section">
                        <p>该过程调用在<span class="q">“ <a href="monitoring-xstream-in.html#GUID-04D3B1E9-8AF4-4D47-9857-87056038B667" title="创建一个过程，该过程在指定的ANYDATA对象中打印某些选定数据类型的值。（可选）您可以向此过程添加更多数据类型。">步骤2：创建在ANYDATA对象中打印值的过程</a> ”中</span>创建的<code class="codeph">print_any</code>过程。
                        </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE print_lcr(lcr IN ANYDATA) IS
  typenm    VARCHAR2(61);
  ddllcr    SYS.LCR$_DDL_RECORD;
  proclcr   SYS.LCR$_PROCEDURE_RECORD;
  rowlcr    SYS.LCR$_ROW_RECORD;
  res       NUMBER;
  newlist   SYS.LCR$_ROW_LIST;
  oldlist   SYS.LCR$_ROW_LIST;
  ddl_text  CLOB;
  ext_attr  ANYDATA;
BEGIN
  typenm := lcr.GETTYPENAME();
  DBMS_OUTPUT.PUT_LINE('type name: ' || typenm);
  IF (typenm = 'SYS.LCR$_DDL_RECORD') THEN
    res := lcr.GETOBJECT(ddllcr);
    DBMS_OUTPUT.PUT_LINE('source database: ' || 
                         ddllcr.GET_SOURCE_DATABASE_NAME);
    DBMS_OUTPUT.PUT_LINE('owner: ' || ddllcr.GET_OBJECT_OWNER);
    DBMS_OUTPUT.PUT_LINE('object: ' || ddllcr.GET_OBJECT_NAME);
    DBMS_OUTPUT.PUT_LINE('is tag null: ' || ddllcr.IS_NULL_TAG);
    DBMS_LOB.CREATETEMPORARY(ddl_text, TRUE);
    ddllcr.GET_DDL_TEXT(ddl_text);
    DBMS_OUTPUT.PUT_LINE('ddl: ' || ddl_text);    
    -- Print extra attributes in DDL LCR
    ext_attr := ddllcr.GET_EXTRA_ATTRIBUTE('serial#');
      IF (ext_attr IS NOT NULL) THEN
        DBMS_OUTPUT.PUT_LINE('serial#: ' || ext_attr.ACCESSNUMBER());
      END IF;
    ext_attr := ddllcr.GET_EXTRA_ATTRIBUTE('session#');
      IF (ext_attr IS NOT NULL) THEN
        DBMS_OUTPUT.PUT_LINE('session#: ' || ext_attr.ACCESSNUMBER());
      END IF; 
    ext_attr := ddllcr.GET_EXTRA_ATTRIBUTE('thread#');
      IF (ext_attr IS NOT NULL) THEN
        DBMS_OUTPUT.PUT_LINE('thread#: ' || ext_attr.ACCESSNUMBER());
      END IF;   
    ext_attr := ddllcr.GET_EXTRA_ATTRIBUTE('tx_name');
      IF (ext_attr IS NOT NULL) THEN
        DBMS_OUTPUT.PUT_LINE('transaction name: ' || ext_attr.ACCESSVARCHAR2());
      END IF;
    ext_attr := ddllcr.GET_EXTRA_ATTRIBUTE('username');
      IF (ext_attr IS NOT NULL) THEN
        DBMS_OUTPUT.PUT_LINE('username: ' || ext_attr.ACCESSVARCHAR2());
      END IF;      
    DBMS_LOB.FREETEMPORARY(ddl_text);
  ELSIF (typenm = 'SYS.LCR$_ROW_RECORD') THEN
    res := lcr.GETOBJECT(rowlcr);
    DBMS_OUTPUT.PUT_LINE('source database: ' || 
                         rowlcr.GET_SOURCE_DATABASE_NAME);
    DBMS_OUTPUT.PUT_LINE('owner: ' || rowlcr.GET_OBJECT_OWNER);
    DBMS_OUTPUT.PUT_LINE('object: ' || rowlcr.GET_OBJECT_NAME);
    DBMS_OUTPUT.PUT_LINE('is tag null: ' || rowlcr.IS_NULL_TAG); 
    DBMS_OUTPUT.PUT_LINE('command_type: ' || rowlcr.GET_COMMAND_TYPE); 
    oldlist := rowlcr.GET_VALUES('old');
    FOR i IN 1..oldlist.COUNT LOOP
      IF oldlist(i) IS NOT NULL THEN
        DBMS_OUTPUT.PUT_LINE('old(' || i || '): ' || oldlist(i).column_name);
        print_any(oldlist(i).data);
      END IF;
    END LOOP;
    newlist := rowlcr.GET_VALUES('new', 'n');
    FOR i in 1..newlist.count LOOP
      IF newlist(i) IS NOT NULL THEN
        DBMS_OUTPUT.PUT_LINE('new(' || i || '): ' || newlist(i).column_name);
        print_any(newlist(i).data);
      END IF;
    END LOOP;
    -- Print extra attributes in row LCR
    ext_attr := rowlcr.GET_EXTRA_ATTRIBUTE('row_id');
      IF (ext_attr IS NOT NULL) THEN
        DBMS_OUTPUT.PUT_LINE('row_id: ' || ext_attr.ACCESSUROWID());
      END IF;
    ext_attr := rowlcr.GET_EXTRA_ATTRIBUTE('serial#');
      IF (ext_attr IS NOT NULL) THEN
        DBMS_OUTPUT.PUT_LINE('serial#: ' || ext_attr.ACCESSNUMBER());
      END IF;
    ext_attr := rowlcr.GET_EXTRA_ATTRIBUTE('session#');
      IF (ext_attr IS NOT NULL) THEN
        DBMS_OUTPUT.PUT_LINE('session#: ' || ext_attr.ACCESSNUMBER());
      END IF; 
    ext_attr := rowlcr.GET_EXTRA_ATTRIBUTE('thread#');
      IF (ext_attr IS NOT NULL) THEN
        DBMS_OUTPUT.PUT_LINE('thread#: ' || ext_attr.ACCESSNUMBER());
      END IF;   
    ext_attr := rowlcr.GET_EXTRA_ATTRIBUTE('tx_name');
      IF (ext_attr IS NOT NULL) THEN
        DBMS_OUTPUT.PUT_LINE('transaction name: ' || ext_attr.ACCESSVARCHAR2());
      END IF;
    ext_attr := rowlcr.GET_EXTRA_ATTRIBUTE('username');
      IF (ext_attr IS NOT NULL) THEN
        DBMS_OUTPUT.PUT_LINE('username: ' || ext_attr.ACCESSVARCHAR2());
      END IF;          
  ELSE
    DBMS_OUTPUT.PUT_LINE('Non-LCR Message with type ' || typenm);
  END IF;
END print_lcr;
/</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="monitoring-xstream-in.html#GUID-505C729C-5893-4B22-A981-33BF3084C67B" title="SQL脚本显示有关数据库中错误队列中的错误事务的详细信息。">显示有关应用错误的详细信息</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-9BF31D03-3451-4C42-8B50-4E185C7B2007" name="GUID-9BF31D03-3451-4C42-8B50-4E185C7B2007"></a><h4 id="XSTRM-GUID-9BF31D03-3451-4C42-8B50-4E185C7B2007" class="sect4"><span class="enumeration_section">11.10.4</span>步骤4：创建一个打印错误队列中所有LCR的过程</h4>
                  <div>
                     <p>创建一个过程，打印所有错误队列中的所有LCR。</p>
                     <div class="section">
                        <p>该过程调用在<span class="q">“ <a href="monitoring-xstream-in.html#GUID-E471ED4F-7EE1-4D5B-ACE5-2298F6EF30D7" title="创建一个打印指定LCR的过程。">步骤3：创建打印指定LCR的过程</a> ”中</span>创建的<code class="codeph">print_lcr</code>过程。
                        </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE print_errors IS
  CURSOR c IS
    SELECT LOCAL_TRANSACTION_ID,
           SOURCE_DATABASE,
           MESSAGE_NUMBER,
           MESSAGE_COUNT,
           ERROR_NUMBER,
           ERROR_MESSAGE
      FROM ALL_APPLY_ERROR
      ORDER BY SOURCE_DATABASE, SOURCE_COMMIT_SCN;
  i      NUMBER;
  txnid  VARCHAR2(30);
  source VARCHAR2(128);
  msgno  NUMBER;
  msgcnt NUMBER;
  errnum NUMBER := 0;
  errno  NUMBER;
  errmsg VARCHAR2(2000);
  lcr    ANYDATA;
  r      NUMBER;
BEGIN
  FOR r IN c LOOP
    errnum := errnum + 1;
    msgcnt := r.MESSAGE_COUNT;
    txnid  := r.LOCAL_TRANSACTION_ID;
    source := r.SOURCE_DATABASE;
    msgno  := r.MESSAGE_NUMBER;
    errno  := r.ERROR_NUMBER;
    errmsg := r.ERROR_MESSAGE;
DBMS_OUTPUT.PUT_LINE('*************************************************');
    DBMS_OUTPUT.PUT_LINE('----- ERROR #' || errnum);
    DBMS_OUTPUT.PUT_LINE('----- Local Transaction ID: ' || txnid);
    DBMS_OUTPUT.PUT_LINE('----- Source Database: ' || source);
    DBMS_OUTPUT.PUT_LINE('----Error in Message: '|| msgno);
    DBMS_OUTPUT.PUT_LINE('----Error Number: '||errno);
    DBMS_OUTPUT.PUT_LINE('----Message Text: '||errmsg);
    FOR i IN 1..msgcnt LOOP
      DBMS_OUTPUT.PUT_LINE('--message: ' || i);
        lcr := DBMS_APPLY_ADM.GET_ERROR_MESSAGE(i, txnid);
        print_lcr(lcr);
    END LOOP;
  END LOOP;
END print_errors;
/
</pre><p>要在创建此过程后运行此过程，请输入以下内容：</p><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON SIZE 1000000

EXEC print_errors</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="monitoring-xstream-in.html#GUID-505C729C-5893-4B22-A981-33BF3084C67B" title="SQL脚本显示有关数据库中错误队列中的错误事务的详细信息。">显示有关应用错误的详细信息</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="props_rev_3"><a id="GUID-E7D5279F-3F3A-431B-B25F-5D3C699208DC" name="GUID-E7D5279F-3F3A-431B-B25F-5D3C699208DC"></a><h4 id="XSTRM-GUID-E7D5279F-3F3A-431B-B25F-5D3C699208DC" class="sect4"><span class="enumeration_section">11.10.5</span>步骤5：创建一个打印事务的所有错误LCR的过程</h4>
                  <div>
                     <p>创建一个过程，打印特定事务的错误队列中的所有LCR。</p>
                     <div class="section">
                        <p>该过程调用在<span class="q">“ <a href="monitoring-xstream-in.html#GUID-E471ED4F-7EE1-4D5B-ACE5-2298F6EF30D7" title="创建一个打印指定LCR的过程。">步骤3：创建打印指定LCR的过程</a> ”中</span>创建的<code class="codeph">print_lcr</code>过程。
                        </p><pre class="oac_no_warn" dir="ltr">CREATE OR REPLACE PROCEDURE print_transaction(ltxnid IN VARCHAR2) IS
  i      NUMBER;
  txnid  VARCHAR2(30);
  source VARCHAR2(128);
  msgno  NUMBER;
  msgcnt NUMBER;
  errno  NUMBER;
  errmsg VARCHAR2(2000);
  lcr    ANYDATA;
BEGIN
  SELECT LOCAL_TRANSACTION_ID,
         SOURCE_DATABASE,
         MESSAGE_NUMBER,
         MESSAGE_COUNT,
         ERROR_NUMBER,
         ERROR_MESSAGE
      INTO txnid, source, msgno, msgcnt, errno, errmsg
      FROM ALL_APPLY_ERROR
      WHERE LOCAL_TRANSACTION_ID =  ltxnid;
  DBMS_OUTPUT.PUT_LINE('----- Local Transaction ID: ' || txnid);
  DBMS_OUTPUT.PUT_LINE('----- Source Database: ' || source);
  DBMS_OUTPUT.PUT_LINE('----Error in Message: '|| msgno);
  DBMS_OUTPUT.PUT_LINE('----Error Number: '||errno);
  DBMS_OUTPUT.PUT_LINE('----Message Text: '||errmsg);
  FOR i IN 1..msgcnt LOOP
  DBMS_OUTPUT.PUT_LINE('--message: ' || i);
    lcr := DBMS_APPLY_ADM.GET_ERROR_MESSAGE(i, txnid); -- gets the LCR
    print_lcr(lcr);
  END LOOP;
END print_transaction;
/
</pre><p>要在创建此过程后运行此过程，请将错误事务的本地事务标识符传递给它。例如，如果本地事务标识符为<code class="codeph">1.17.2485</code> ，则输入以下内容：</p><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON SIZE 1000000

EXEC print_transaction('1.17.2485')</pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="monitoring-xstream-in.html#GUID-505C729C-5893-4B22-A981-33BF3084C67B" title="SQL脚本显示有关数据库中错误队列中的错误事务的详细信息。">显示有关应用错误的详细信息</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>