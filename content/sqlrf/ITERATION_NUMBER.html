<html lang="en-us" dir="ltr" xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>ITERATION_NUMBER</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQL Language Reference ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQL Language Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-12T15:36:36-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E96310-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="INSTR.html" title="Previous" type="text/html">
      <link rel="next" href="JSON_ARRAY.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="SQL Language Reference">
    <meta name="dcterms.isVersionOf" content="SQLRF">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body dir="ltr">
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="INSTR.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="JSON_ARRAY.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL语言参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="Functions.html" property="item" typeof="WebPage"><span property="name">功能</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">ITERATION_NUMBER</li>
            </ol>
            <a id="GUID-C7B75092-475A-4AB3-8A7C-94C68704538C" name="GUID-C7B75092-475A-4AB3-8A7C-94C68704538C"></a><a id="SQLRF51459"></a><a id="SQLRF51460"></a><a id="SQLRF51461"></a><a id="SQLRF06328"></a>
            
            <h2 id="SQLRF-GUID-C7B75092-475A-4AB3-8A7C-94C68704538C" class="sect2">ITERATION_NUMBER</h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1" id="GUID-C7B75092-475A-4AB3-8A7C-94C68704538C__GUID-77AD8263-1041-477A-98C6-B474AC9DAAF2">句法</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-C7B75092-475A-4AB3-8A7C-94C68704538C__GUID-9FCE0E21-A597-40EC-947E-E5EB502D55C1"><img src="img/iteration_number.gif" alt="下面是iteration_number.eps的描述" title="下面是iteration_number.eps的描述" longdesc="img_text/iteration_number.html"><br><a href="img_text/iteration_number.html">说明iteration_number.eps的描述</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-C7B75092-475A-4AB3-8A7C-94C68704538C__GUID-D0CAE3A8-8ABD-4654-BABE-7F48D0D82171">目的</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><code class="codeph">ITERATION_NUMBER</code>函数只能在<code class="codeph">SELECT</code>语句的<span class="italic"><code class="codeph">model_clause</code></span>中使用，并且只能在<span class="italic"><code class="codeph">model_clause</code></span>中指定<code class="codeph">ITERATE(</code> <span class="italic"><code class="codeph">number</code></span> <code class="codeph">)</code> <span class="italic"><code class="codeph">model_rules_clause</code></span> 。它返回一个整数，表示通过模型规则完成的迭代。<code class="codeph">ITERATION_NUMBER</code>函数在第一次迭代期间返回0。对于每个后续迭代， <code class="codeph">ITERATION_NUMBER</code>函数返回<span class="italic"><code class="codeph">iteration_number</code></span>的等价物加1。
                  </p>
                  <div class="infoboxnotealso" id="GUID-C7B75092-475A-4AB3-8A7C-94C68704538C__GUID-4010610F-97C2-4744-8874-FB3B1866F323">
                     <p class="notep1">也可以看看：</p>
                     <p><span class="italic"><a href="SELECT.html#GUID-CFA006CA-6FF1-4972-821E-6996142A51C6__I2172805">model_clause</a></span>和<span class="q">“ <a href="Model-Expressions.html#GUID-83D3FD56-8346-4D3F-A49E-5FE41FE19257">Model Expressions</a> ”</span>用于语法和语义</p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-C7B75092-475A-4AB3-8A7C-94C68704538C__GUID-53A2BD07-0DF3-482E-8DEC-4C4A1A2F13E9">例子</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>以下示例分别将1998年和1999年鼠标垫的销售额分配给2001年和2002年鼠标垫的销售额：</p><pre class="oac_no_warn" dir="ltr">SELECT country, prod, year, s
  FROM sales_view_ref
  MODEL
    PARTITION BY (country)
    DIMENSION BY (prod, year)
    MEASURES (sale s)
    IGNORE NAV
    UNIQUE DIMENSION
    RULES UPSERT SEQUENTIAL ORDER ITERATE(2)
      (
        s['Mouse Pad', 2001 + ITERATION_NUMBER] =
          s['Mouse Pad', 1998 + ITERATION_NUMBER]
      )
  ORDER BY country, prod, year;

COUNTRY       PROD                                         YEAR           S
----------    -----------------------------------      --------   ---------
France        Mouse Pad                                    1998     2509.42
France        Mouse Pad                                    1999     3678.69
France        Mouse Pad                                    2000     3000.72
France        Mouse Pad                                    2001     2509.42
France        Mouse Pad                                    2002     3678.69
France        Standard Mouse                               1998     2390.83
France        Standard Mouse                               1999     2280.45
France        Standard Mouse                               2000     1274.31
France        Standard Mouse                               2001     2164.54
Germany       Mouse Pad                                    1998     5827.87
Germany       Mouse Pad                                    1999     8346.44
Germany       Mouse Pad                                    2000     7375.46
Germany       Mouse Pad                                    2001     5827.87
Germany       Mouse Pad                                    2002     8346.44
Germany       Standard Mouse                               1998     7116.11
Germany       Standard Mouse                               1999     6263.14
Germany       Standard Mouse                               2000     2637.31
Germany       Standard Mouse                               2001     6456.13
 
18 rows selected.
</pre><p>前面的示例需要视图<code class="codeph">sales_view_ref</code> 。请参阅<span class="q">“ <a href="SELECT.html#GUID-CFA006CA-6FF1-4972-821E-6996142A51C6__I2171160">MODEL子句：示例</a> ”</span>以创建此视图。
                  </p>
               </div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>