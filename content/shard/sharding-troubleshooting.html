<html lang="en-us"  xml:lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can enable tracing, locate log and trace files, and troubleshooting common issues.">
      <meta name="description" content="You can enable tracing, locate log and trace files, and troubleshooting common issues.">
      <title>Oracle Sharding疑难解答</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Using Oracle Sharding">
      <meta property="og:description" content="You can enable tracing, locate log and trace files, and troubleshooting common issues.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Using Oracle Sharding">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="using-oracle-sharding.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2019-02-14T12:19:13-08:00">
      <meta name="dcterms.title" content="Using Oracle Sharding">
      <meta name="dcterms.dateCopyrighted" content="2018, 2019">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E87088-04">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/19">
      
      <link rel="prev" href="sharding-lifecycle-management.html" title="Previous" type="text/html">
      <link rel="next" href="book-index.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"19","element_name":"Release 19","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="SHARD">
    <meta name="dcterms.release" content="Release 19">
  </head>
   <body >
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="sharding-lifecycle-management.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一页</a> <a href="book-index.html" class="pull-right">下一页<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">使用Oracle Sharding</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Oracle Sharding疑难解答</li>
            </ol>
            <a id="GUID-629262E5-7910-4690-A726-A565C59BA73E" name="GUID-629262E5-7910-4690-A726-A565C59BA73E"></a>
            
            <h2 id="SHARD-GUID-629262E5-7910-4690-A726-A565C59BA73E" class="sect2"><span class="enumeration_chapter">11</span> Oracle Sharding故障排除</h2>
         </header>
         <div class="ind">
            <div>
               <p>您可以启用跟踪，查找日志和跟踪文件以及解决常见问题。</p>
               <p>以下主题详细介绍了Oracle Sharding故障排除：</p>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="sharding-troubleshooting.html#GUID-8D44BB2E-40C5-454F-A864-8004B1FC930D">Oracle Sharding跟踪和调试信息</a><br>以下主题说明如何启用跟踪和查找日志。
                  </li>
                  <li class="ulchildlink"><a href="sharding-troubleshooting.html#GUID-2DD22217-BDA6-4C07-A4C6-19081960B743">Sharded数据库的常见错误模式和解决方案</a><br>有关解决Oracle Sharding中常见错误的信息，请参阅以下主题。
                  </li>
               </ul>
            </div>
            
            <div class="sect2"><a id="GUID-8D44BB2E-40C5-454F-A864-8004B1FC930D" name="GUID-8D44BB2E-40C5-454F-A864-8004B1FC930D"></a><h3 id="SHARD-GUID-8D44BB2E-40C5-454F-A864-8004B1FC930D" class="sect3"><span class="enumeration_section">11.1</span> Oracle Sharding跟踪和调试信息</h3>
               <div>
                  <p>以下主题说明如何启用跟踪和查找日志。</p>
                  <p></p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="sharding-troubleshooting.html#GUID-6BA8B440-BEFE-4F7C-A8BB-70CCC57BD11D">为Oracle Sharding启用跟踪</a><br>启用PL / SQL跟踪以跟踪分片数据库中的问题。
                     </li>
                     <li class="ulchildlink"><a href="sharding-troubleshooting.html#GUID-56202B11-CDF5-48DD-A112-7CD562D36C65">在何处查找Oracle Sharding警报日志和跟踪文件</a><br>在Oracle Sharding环境中，有几个地方可以查找跟踪和警报日志。
                     </li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sharding-troubleshooting.html#GUID-629262E5-7910-4690-A726-A565C59BA73E" title="您可以启用跟踪，查找日志和跟踪文件以及解决常见问题。">Oracle Sharding疑难解答</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-6BA8B440-BEFE-4F7C-A8BB-70CCC57BD11D" name="GUID-6BA8B440-BEFE-4F7C-A8BB-70CCC57BD11D"></a><h4 id="SHARD-GUID-6BA8B440-BEFE-4F7C-A8BB-70CCC57BD11D" class="sect4"><span class="enumeration_section">11.1.1</span>启用Oracle Sharding跟踪</h4>
                  <div>
                     <p>启用PL / SQL跟踪以跟踪分片数据库中的问题。</p>
                     <p>要获得完整跟踪，请按此处所示设置<code class="codeph">GWM_TRACE</code>级别。以下语句提供了即时跟踪，但在数据库重新启动后将禁用跟踪。
                     </p><pre class="pre codeblock"><code>ALTER SYSTEM SET EVENTS 'immediate trace name GWM_TRACE level 7';</code></pre><p>以下语句启用永久持续的跟踪，但仅在重新启动数据库之后。</p><pre class="pre codeblock"><code>ALTER SYSTEM SET EVENT='10798 trace name context forever, level 7' SCOPE=spfile;</code></pre><p>建议您将上述两个跟踪设置为彻底。</p>
                     <p>要跟踪Oracle Sharding环境中的所有内容，必须在分片目录和所有分片上启用跟踪。跟踪将写入分片目录上的GDSCTL会话的RDBMS会话跟踪文件，或者由各个分片上的分片导向器（也称为GSM）创建的会话。</p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-troubleshooting.html#GUID-8D44BB2E-40C5-454F-A864-8004B1FC930D" title="以下主题说明如何启用跟踪和查找日志。">Oracle Sharding跟踪和调试信息</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-56202B11-CDF5-48DD-A112-7CD562D36C65" name="GUID-56202B11-CDF5-48DD-A112-7CD562D36C65"></a><h4 id="SHARD-GUID-56202B11-CDF5-48DD-A112-7CD562D36C65" class="sect4"><span class="enumeration_section">11.1.2</span>在何处查找Oracle Sharding警报日志和跟踪文件</h4>
                  <div>
                     <p>在Oracle Sharding环境中，有几个地方可以查找跟踪和警报日志。</p>
                     <p>位于diag / rdbms / ..中的标准RDBMS跟踪文件将包含跟踪输出。</p>
                     <p>“deploy”的输出将转到作业队列跟踪文件<span class="variable" translate="no">db_unique_name</span> _jXXX_ <span class="variable" translate="no">PID</span> .trc。
                     </p>
                     <p>其他GDSCTL命令的输出将转到共享服务器跟踪文件<span class="variable" translate="no">db_unique_name</span> _sXXX_ <span class="variable" translate="no">PID</span> .trc或专用跟踪文件<span class="variable" translate="no">db_unique_name</span> _ora_ <span class="variable" translate="no">PID</span> .trc，具体取决于所使用的连接字符串。
                     </p>
                     <p>共享服务器通常用于目录和分片的许多连接，因此跟踪位于名为<span class="variable" translate="no">SID</span> _s00 * .trc的共享服务器跟踪文件中。
                     </p>
                     <p>GDSCTL有几个可以显示状态和错误信息的命令。</p>
                     <p>使用<code class="codeph">GDSCTL STATUS GSM</code>查看分片导向器（GSM）跟踪和日志文件的位置。
                     </p><pre class="pre codeblock"><code>GDSCTL&gt; status
Alias                     SHARDDIRECTOR1
Version                   18.0.0.0.0
Start Date                25-FEB-2016 07:27:39
Trace Level               support
<span class="bold">Listener Log File         /u01/app/oracle/diag/gsm/slc05abw/sharddirector1/alert/log.xml
</span><span class="bold">Listener Trace File       /u01/app/oracle/diag/gsm/slc05abw/sharddirector1/trace</span>/
ora_10516_139939557888352.trc
Endpoint summary          (ADDRESS=(HOST=shard0)(PORT=1571)(PROTOCOL=tcp))
GSMOCI Version            2.2.1
Mastership                N
Connected to GDS catalog  Y
Process Id                10535
Number of reconnections   0
Pending tasks.     Total  0
Tasks in  process. Total  0
Regional Mastership       TRUE
Total messages published  71702
Time Zone                 +00:00
Orphaned Buddy Regions:   None
GDS region                region1
Network metrics:
   Region: region2 Network factor:0</code></pre><p>alert.log文件的非XML版本可以在/ trace目录中找到，如下所示。</p><pre class="pre codeblock"><code>/u01/app/oracle/diag/gsm/<kbd class="userinput">shard-director-node</kbd>/sharddirector1/trace/alert*.log</code></pre><p>要解密GSM中的日志输出，请使用以下命令。</p><pre class="pre codeblock"><code>GDSCTL&gt; set _event 17 -config_only</code></pre><p>主分片导向器（GSM）跟踪/警报文件包括任何和所有异步命令或后台任务的状态和错误（移动块，拆分块，部署，分片注册，Data Guard配置，分片DDL执行等）</p>
                     <p>要查找分片导向器的待处理AQ请求（包括错误状态），请使用GDSCTL CONFIG。</p>
                     <p>要查看正在进行的和计划的块移动，请使用GDSCTL CONFIG CHUNKS -show_reshard</p>
                     <p>要查看具有失败DDL的分片，请使用GDSCTL SHOW DDL -failed_only</p>
                     <p>要查看给定分片的DDL错误信息，请使用GDSCTL CONFIG SHARD <span class="variable" translate="no">shard_name</span></p>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：</strong> <a href="sharding-troubleshooting.html#GUID-8D44BB2E-40C5-454F-A864-8004B1FC930D" title="以下主题说明如何启用跟踪和查找日志。">Oracle Sharding跟踪和调试信息</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
            <div class="sect2"><a id="GUID-2DD22217-BDA6-4C07-A4C6-19081960B743" name="GUID-2DD22217-BDA6-4C07-A4C6-19081960B743"></a><h3 id="SHARD-GUID-2DD22217-BDA6-4C07-A4C6-19081960B743" class="sect3"><span class="enumeration_section">11.2分</span>片数据库的常见错误模式和解决方案</h3>
               <div>
                  <p>有关解决Oracle Sharding中常见错误的信息，请参阅以下主题。</p>
                  <p></p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="sharding-troubleshooting.html#GUID-134A3FCD-4F19-4355-984E-F157EBC7802F">启动远程调度程序代理的问题</a><br>如果在所有分片主机上启动Remote Scheduler Agent时遇到问题，请尝试以下操作：</li>
                     <li class="ulchildlink"><a href="sharding-troubleshooting.html#GUID-96F666F4-953B-411C-9537-0510062A8B6E">Shard Director无法启动</a><br>如果您在启动分片导演时遇到问题，请尝试以下操作：</li>
                     <li class="ulchildlink"><a href="sharding-troubleshooting.html#GUID-90876128-74A2-48EE-8EFD-3E2F274B79D9">来自使用CREATE SHARD创建的碎片的错误</a><br>对于使用GDSCTL CREATE SHARD命令创建的分片在DEPLOY期间发生的错误，请检查以下内容：</li>
                     <li class="ulchildlink"><a href="sharding-troubleshooting.html#GUID-E5F09B41-2304-4139-B1C1-479E0EE1681D">使用创建分片的问题</a><br>以下是使用GDSCTL CREATE SHARD命令时出现的一些问题的解决方案。
                     </li>
                     <li class="ulchildlink"><a href="sharding-troubleshooting.html#GUID-924E1530-F486-4049-B674-A275C3841D3A">使用部署命令的问题</a><br></li>
                  </ul>
                  <div class="familylinks">
                     <div class="parentlink">
                        <p><strong>父主题：</strong> <a href="sharding-troubleshooting.html#GUID-629262E5-7910-4690-A726-A565C59BA73E" title="您可以启用跟踪，查找日志和跟踪文件以及解决常见问题。">Oracle Sharding疑难解答</a></p>
                     </div>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-134A3FCD-4F19-4355-984E-F157EBC7802F" name="GUID-134A3FCD-4F19-4355-984E-F157EBC7802F"></a><h4 id="SHARD-GUID-134A3FCD-4F19-4355-984E-F157EBC7802F" class="sect4"><span class="enumeration_section">11.2.1</span>启动远程调度程序代理的问题</h4>
                  <div>
                     <p>如果在所有分片主机上启动Remote Scheduler Agent时遇到问题，请尝试以下操作：</p>
                     <p>要启动Scheduler，您必须位于每个分片服务器上的ORACLE_HOME内。</p><pre class="pre codeblock"><code>[oracle@shard2 ~]$ echo welcome | schagent -registerdatabase 192.0.2.24 8080
Agent Registration Password?
Failed to get agent Registration Info from db: No route to host

Solution: Disable firewall

service ipchains stop
service iptables stop
chkconfig ipchains off
chkconfig iptables off
</code></pre></div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：分</strong> <a href="sharding-troubleshooting.html#GUID-2DD22217-BDA6-4C07-A4C6-19081960B743" title="有关解决Oracle Sharding中常见错误的信息，请参阅以下主题。">片数据库的常见错误模式和解决方案</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-96F666F4-953B-411C-9537-0510062A8B6E" name="GUID-96F666F4-953B-411C-9537-0510062A8B6E"></a><h4 id="SHARD-GUID-96F666F4-953B-411C-9537-0510062A8B6E" class="sect4"><span class="enumeration_section">11.2.2</span> Shard Director无法启动</h4>
                  <div>
                     <p>如果您在启动分片导演时遇到问题，请尝试以下操作：</p>
                     <p>要启动Scheduler，您必须位于每个分片服务器上的ORACLE_HOME内。</p><pre class="pre codeblock"><code>GDSCTL&gt;start gsm -gsm shardDGdirector
GSM-45054: GSM error
GSM-40070: GSM is not able to establish connection to GDS catalog

GSM alert log, /u01/app/oracle/diag/gsm/shard1/sharddgdirector/trace/alert_gds.log
GSM-40112: OCI error. Code (-1). See GSMOCI trace for details.
GSM-40122: OCI Catalog Error. Code: 12514. Message: ORA-12514: TNS:listener does not 
currently know of service requested in connect descriptor
GSM-40112: OCI error. Code (-1). See GSMOCI trace for details.
2017-04-20T22:50:22.496362+05:30
Process 1 in GSM instance is down
GSM shutdown is successful
GSM shutdown is in progress
NOTE : if not message displayed in the GSM log then enable GSM trace level to 16 
while adding GSM itself.</code></pre><ol>
                        <li>
                           <p>删除无法启动的新创建的分片导向器（GSM）。</p><pre class="pre codeblock"><code>GDSCTL&gt; remove gsm -gsm shardDGdirector
</code></pre></li>
                        <li>
                           <p>使用跟踪级别16添加分片导向器。</p><pre class="pre codeblock"><code>GDSCTL&gt; add gsm -gsm shardDGdirector -listener <span class="variable" translate="no">port_num</span> -pwd <span class="variable" translate="no">gsmcatuser_password</span>
 -catalog <span class="variable" translate="no">hostname</span>:<span class="variable" translate="no">port_num</span>:<span class="variable" translate="no">shard_catalog_name</span>
 -region region1 <span class="bold">-trace_level 16</span></code></pre></li>
                        <li>
                           <p>如果分片目录数据库在非默认端口（1521除外）上运行，请设置远程侦听器。</p><pre class="pre codeblock"><code>SQL&gt; alter system set local_listener='(DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)
(HOST=<span class="variable" translate="no">hostname</span>)(PORT=<span class="variable" translate="no">port_num</span>)))';</code></pre></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：分</strong> <a href="sharding-troubleshooting.html#GUID-2DD22217-BDA6-4C07-A4C6-19081960B743" title="有关解决Oracle Sharding中常见错误的信息，请参阅以下主题。">片数据库的常见错误模式和解决方案</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-90876128-74A2-48EE-8EFD-3E2F274B79D9" name="GUID-90876128-74A2-48EE-8EFD-3E2F274B79D9"></a><h4 id="SHARD-GUID-90876128-74A2-48EE-8EFD-3E2F274B79D9" class="sect4"><span class="enumeration_section">11.2.3</span>使用CREATE SHARD创建的碎片的错误</h4>
                  <div>
                     <p>对于使用GDSCTL CREATE SHARD命令创建的分片在DEPLOY期间发生的错误，请检查以下内容：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>远程调度程序代理登录分片主机</p>
                        </li>
                        <li>
                           <p>分片目录上的DBA_SCHEDULER_JOB_RUN_DETAILS视图</p>
                        </li>
                        <li>
                           <p>NETCA / DBCA在分片主机上的$ ORACLE_BASE / cfgtoollogs中输出文件</p>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：分</strong> <a href="sharding-troubleshooting.html#GUID-2DD22217-BDA6-4C07-A4C6-19081960B743" title="有关解决Oracle Sharding中常见错误的信息，请参阅以下主题。">片数据库的常见错误模式和解决方案</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-E5F09B41-2304-4139-B1C1-479E0EE1681D" name="GUID-E5F09B41-2304-4139-B1C1-479E0EE1681D"></a><h4 id="SHARD-GUID-E5F09B41-2304-4139-B1C1-479E0EE1681D" class="sect4"><span class="enumeration_section">11.2.4</span>使用创建分片的问题</h4>
                  <div>
                     <p>以下是使用GDSCTL CREATE SHARD命令时出现的一些问题的解决方案。</p>
                     <div class="section">
                        <p class="subhead3" id="GUID-E5F09B41-2304-4139-B1C1-479E0EE1681D__GUID-7BE89BC5-DF70-4EBA-B029-B3AC01ECFAE6">确保创建$ ORACLE_BASE / oradata和$ ORACLE_BASE / fast_recovery_area目录以避免以下错误</p><pre class="pre codeblock"><code>GDSCTL&gt; create shard -shardgroup primary_shardgroup -destination che -osaccount
 oracle -ospassword oracle
GSM-45029: SQL error
ORA-03710: directory does not exist or is not writeable at destination:
 $ORACLE_BASE/oradata
ORA-06512: at "GSMADMIN_INTERNAL.DBMS_GSM_POOLADMIN", line 6920
ORA-06512: at "SYS.DBMS_SYS_ERROR", line 86
ORA-06512: at "GSMADMIN_INTERNAL.DBMS_GSM_POOLADMIN", line 4730
ORA-06512: at line 1

GDSCTL&gt;create shard -shardgroup primary_shardgroup -destination che -osaccount oracle
 -ospassword oracle
GSM-45029: SQL error
ORA-03710: directory does not exist or is not writeable at destination:
 $ORACLE_BASE/fast_recovery_area
ORA-06512: at "GSMADMIN_INTERNAL.DBMS_GSM_POOLADMIN", line 6920
ORA-06512: at "SYS.DBMS_SYS_ERROR", line 86
ORA-06512: at "GSMADMIN_INTERNAL.DBMS_GSM_POOLADMIN", line 4755
ORA-06512: at line 1</code></pre><p>解决方案：在所有分片主机上的$ ORACLE_BASE下创建oradata，fast_recovery_area。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E5F09B41-2304-4139-B1C1-479E0EE1681D__GUID-AAC9EA73-4EEA-471D-B851-A2F1CD624F03">特权问题</p><pre class="pre codeblock"><code>GDSCTL&gt;create shard -shardgroup primary_shardgroup -destination blr -credential cred
GSM-45029: SQL error
ORA-02610: Remote job failed with error:
EXTERNAL_LOG_ID="job_79126_3",
USERNAME="oracle",
STANDARD_ERROR="Launching external job failed: Login executable not setuid-root"
ORA-06512: at "GSMADMIN_INTERNAL.DBMS_GSM_POOLADMIN", line 6920
ORA-06512: at "SYS.DBMS_SYS_ERROR", line 86
ORA-06512: at "GSMADMIN_INTERNAL.DBMS_GSM_POOLADMIN", line 4596
ORA-06512: at line 1</code></pre><p>解决方案：确保对以下目录具有root权限，</p><pre class="pre codeblock"><code>chown root $ORACLE_HOME/bin/extjob
chmod 4750 $ORACLE_HOME/bin/extjob
chown root $ORACLE_HOME/rdbms/admin/externaljob.ora
chmod 640 $ORACLE_HOME/rdbms/admin/externaljob.ora
chown root $ORACLE_HOME/bin/jssu
chmod 4750 $ORACLE_HOME/bin/jssu</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3" id="GUID-E5F09B41-2304-4139-B1C1-479E0EE1681D__GUID-BBA7ECD4-9F3D-4328-9743-339B0A5086A5">创建分片时出错</p><pre class="pre codeblock"><code>GDSCTL&gt;create shard -shardgroup primary_shardgroup -destination mysql02 -osaccount
 oracle -ospassword oracle
GSM-45029: SQL error
ORA-03719: Shard character set does not match catalog character set.
ORA-06512: at "GSMADMIN_INTERNAL.DBMS_GSM_POOLADMIN", line 7469
ORA-06512: at "SYS.DBMS_SYS_ERROR", line 79
ORA-06512: at "GSMADMIN_INTERNAL.DBMS_GSM_POOLADMIN", line 5770
ORA-06512: at line 1</code></pre><p>解决方案：检查JAVA版本，它必须在分片目录和所有分片服务器上相同。</p><pre class="pre codeblock"><code>rpm -qa|grep java</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：分</strong> <a href="sharding-troubleshooting.html#GUID-2DD22217-BDA6-4C07-A4C6-19081960B743" title="有关解决Oracle Sharding中常见错误的信息，请参阅以下主题。">片数据库的常见错误模式和解决方案</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
               <div class="sect3"><a id="GUID-924E1530-F486-4049-B674-A275C3841D3A" name="GUID-924E1530-F486-4049-B674-A275C3841D3A"></a><h4 id="SHARD-GUID-924E1530-F486-4049-B674-A275C3841D3A" class="sect4"><span class="enumeration_section">11.2.5</span>使用部署命令的问题</h4>
                  <div>
                     <p></p><pre class="pre codeblock"><code>GDSCTL&gt; deploy
GSM-45029: SQL error
ORA-29273: HTTP request failed
ORA-06512: at "SYS.DBMS_ISCHED", line 3715
ORA-06512: at "SYS.UTL_HTTP", line 1267
ORA-29276: transfer timeout
ORA-06512: at "SYS.UTL_HTTP", line 651
ORA-06512: at "SYS.UTL_HTTP", line 1257
ORA-06512: at "SYS.DBMS_ISCHED", line 3708
ORA-06512: at "SYS.DBMS_SCHEDULER", line 2609
ORA-06512: at "GSMADMIN_INTERNAL.DBMS_GSM_POOLADMIN", line 14284
ORA-06512: at line 1</code></pre><p>解决方案：检查$ ORACLE_HOME / data / pendingjobs以获取确切的错误。如果钱包有任何问题，ORA-1017会被抛出。</p>
                     <ol>
                        <li>
                           <p>在有问题的Shard主机上停止远程调度程序代理。</p><pre class="pre codeblock"><code>schagent -stop</code></pre></li>
                        <li>
                           <p>在数据库主页上重命名wallet direcotry</p><pre class="pre codeblock"><code>mv $ORACLE_HOME/data/wallet $ORACLE_HOME/data/wallet.old</code></pre></li>
                        <li>
                           <p>启动远程调度程序代理程序，它将创建新的钱包目录</p><pre class="pre codeblock"><code>schagent -start 
schagent -status 
echo welcome | schagent -registerdatabase 10.10.10.10 8080</code></pre></li>
                     </ol>
                  </div>
                  <div>
                     <div class="familylinks">
                        <div class="parentlink">
                           <p><strong>父主题：分</strong> <a href="sharding-troubleshooting.html#GUID-2DD22217-BDA6-4C07-A4C6-19081960B743" title="有关解决Oracle Sharding中常见错误的信息，请参阅以下主题。">片数据库的常见错误模式和解决方案</a></p>
                        </div>
                     </div>
                  </div>
                  
               </div>
            </div>
         </div>
      </article>
   </body>
</html>